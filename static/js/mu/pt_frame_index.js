(function(){var bd=NEJ.P,ce=NEJ.O,fN=NEJ.R,bb=bd("nej.e"),bi=bd("nej.v"),bF=bd("nej.ut"),wh;if(!!bF.MI)return;bF.MI=NEJ.C();wh=bF.MI.bR(bF.ek);wh.dv=function(){this.iZ={onchange:this.wd.bh(this),ondragend:this.wd.gD(this,!0)};this.dC()};wh.cB=function(bf){this.cC(bf);this.iZ.view=bb.bD(bf.track);this.iZ.body=bb.bD(bf.slide);this.iZ.mbar=this.iZ.view;this.Sn(bf.range);this.de([[this.iZ.view,"mousedown",this.bvJ.bh(this)]]);this.mX=bF.zH.bG(this.iZ)};wh.cL=function(){this.cR();this.mX.bV();delete this.mX;delete this.kj;delete this.iZ.view;delete this.iZ.body;delete this.iZ.mbar};wh.wd=function(be,jK){var beJ=be.left/this.kj.x[1],beK=be.top/this.kj.y[1],beL=this.kj.x,beM=this.kj.y;this.bN("onchange",{stopped:!!jK,x:{rate:beJ,value:beJ*(beL[1]-beL[0])},y:{rate:beK,value:beK*(beM[1]-beM[0])}})};wh.bvJ=function(be){var cw=bb.lQ(this.iZ.view),beN={x:bi.nl(be),y:bi.qx(be)},dV={x:Math.floor(this.iZ.body.offsetWidth/2),y:Math.floor(this.iZ.body.offsetHeight/2)};this.mX.gn({top:beN.y-cw.y-dV.y,left:beN.x-cw.x-dV.x})};wh.Sn=function(hQ){var pb;if(!!this.kj){var lS=this.mX.Uv();pb={x:lS.left/this.kj.x[1],y:lS.top/this.kj.y[1]}}hQ=hQ||ce;var bvI=(hQ.x||fN)[1]||this.iZ.view.clientWidth-this.iZ.body.offsetWidth,bvF=(hQ.y||fN)[1]||this.iZ.view.clientHeight-this.iZ.body.offsetHeight;this.kj={x:hQ.x||[0,bvI],y:hQ.y||[0,bvF]};if(!!pb)this.gn(pb);return this};wh.gn=function(pb){pb=pb||ce;this.mX.gn({top:this.kj.y[1]*(pb.y||0),left:this.kj.x[1]*(pb.x||0)})}})();
(function(){var bF=NEJ.P("nej.ut"),beR;if(!!bF.At)return;bF.At=NEJ.C();beR=bF.At.bR(bF.MI);beR.dv=function(){this.dC();this.iZ.direction=2}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bi=bd("nej.v"),bF=bd("nej.p"),dY=bd("nej.ui"),gc=bd("nej.ut"),bT=bd("nm.w"),bc,bP;bT.uo=NEJ.C();bc=bT.uo.bR(dY.fW);bP=bT.uo.dI;bc.dv=function(){this.dC()};bc.cB=function(bf){this.cC(bf);this.bs=bb.bD(bf.content);this.ke=bb.bD(bf.slide);this.is=bb.bD(bf.track);this.bgn=bf.speed;this.TD=this.bs.scrollHeight-this.bs.clientHeight;bb.ch(this.ke,"height",(this.bs.clientHeight/this.bs.scrollHeight*parseInt(bb.eG(this.is,"height"))||0)+"px");if(this.bs.scrollHeight<=this.bs.clientHeight)bb.ch(this.ke,"display","none");else bb.ch(this.ke,"display","block");this.qS=gc.At.bG({slide:this.ke,track:this.is,onchange:this.TF.bh(this)});if(bF.dU.browser!="firefox")this.de([[this.bs,"mousewheel",this.xr.bh(this)]]);else{this.bs.addEventListener("DOMMouseScroll",this.xr.bh(this),false)}};bc.cL=function(){this.cR();this.qS.bV();delete this.bs;delete this.ke;delete this.is;delete this.kj;delete this.bgn};bc.TF=function(be){this.bs.scrollTop=parseInt(this.TD*be.y.rate)};bc.xr=function(be){bi.dc(be);this.TD=this.bs.scrollHeight-this.bs.clientHeight;var dV=0,BF,eb,hf;eb=parseInt(this.is.clientHeight)-parseInt(bb.eG(this.ke,"height"));dV=be.wheelDelta?be.wheelDelta/120:-be.detail/3;BF=parseInt(bb.eG(this.ke,"top"))-dV*this.bgn;if(BF<0)BF=0;if(BF>eb)BF=eb;bb.ch(this.ke,"top",BF+"px");hf=parseInt(bb.eG(this.ke,"top"));this.qS.bN("onchange",{y:{rate:hf/eb}})};bc.ng=function(){this.TD=this.bs.scrollHeight-this.bs.clientHeight;this.qS.gn({x:0,y:0});bb.ch(this.ke,"height",this.bs.clientHeight/this.bs.scrollHeight*parseInt(this.is.clientHeight)+"px");this.qS.Sn({x:[],y:[0,this.is.clientHeight-parseInt(bb.eG(this.ke,"height"))]});if(this.bs.scrollHeight<=this.bs.clientHeight)bb.ch(this.ke,"display","none");else bb.ch(this.ke,"display","block")};bc.gn=function(gB){this.qS.gn(gB)};bc.Br=function(TJ){var bvi=parseInt(bb.eG(this.ke,"height"));var bvh=parseInt(bb.eG(this.is,"height"));var yY=bvh-bvi;var hf=parseInt(yY*TJ)+"px";bb.ch(this.ke,"top",hf)};bc.bgy=function(){if(this.bs.scrollHeight<=this.bs.clientHeight)return;var TJ=this.bs.scrollTop/(this.bs.scrollHeight-this.bs.clientHeight);this.Br(TJ)};bc.bPb=function(){if(this.qS)this.qS.Sn()}})();
(function(){var p=NEJ.P("nej.u");var kX=8;var Jg=function(fx,di){return fx<<di|fx>>>32-di};var kq=function(x,y){var boW=(x&65535)+(y&65535),bCr=(x>>16)+(y>>16)+(boW>>16);return bCr<<16|boW&65535};var bCq=function(t,b,c,d){if(t<20)return b&c|~b&d;if(t<40)return b^c^d;if(t<60)return b&c|b&d|c&d;return b^c^d};var bCp=function(t){if(t<20)return 1518500249;if(t<40)return 1859775393;if(t<60)return-1894007588;return-899497514};var rh=function(){var xY=function(i){return i%32},xZ=function(i){return 32-kX-i%32};return function(dR,ya){var Gm=[],jD=(1<<kX)-1,og=ya?xY:xZ;for(var i=0,l=dR.length*kX;i<l;i+=kX)Gm[i>>5]|=(dR.charCodeAt(i/kX)&jD)<<og(i);return Gm}}();var Go=function(){var bpt="0123456789abcdef",xY=function(i){return i%4},xZ=function(i){return 3-i%4};return function(iw,ya){var cI=[],og=ya?xY:xZ;for(var i=0,l=iw.length*4;i<l;i++){cI.push(bpt.charAt(iw[i>>2]>>og(i)*8+4&15)+bpt.charAt(iw[i>>2]>>og(i)*8&15))}return cI.join("")}}();var Jc=function(){var xY=function(i){return i%32},xZ=function(i){return 32-kX-i%32};return function(Gm,ya){var cI=[],jD=(1<<kX)-1,og=ya?xY:xZ;for(var i=0,l=Gm.length*32;i<l;i+=kX)cI.push(String.fromCharCode(Gm[i>>5]>>>og(i)&jD));return cI.join("")}}();var zB=function(){var bCo="=",bCm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xY=function(i){return i%4},xZ=function(i){return 3-i%4};return function(iw,ya){var cI=[],og=ya?xY:xZ;for(var i=0,bpB;i<iw.length*4;i+=3){bpB=(iw[i>>2]>>8*og(i)&255)<<16|(iw[i+1>>2]>>8*og(i+1)&255)<<8|iw[i+2>>2]>>8*og(i+2)&255;for(var j=0;j<4;j++)cI.push(i*8+j*6>iw.length*32?bCo:bCm.charAt(bpB>>6*(3-j)&63))}return cI.join("")}}();var IX=function(q,a,b,x,s,t){return kq(Jg(kq(kq(a,q),kq(x,t)),s),b)};var mc=function(a,b,c,d,x,s,t){return IX(b&c|~b&d,a,b,x,s,t)};var mk=function(a,b,c,d,x,s,t){return IX(b&d|c&~d,a,b,x,s,t)};var ml=function(a,b,c,d,x,s,t){return IX(b^c^d,a,b,x,s,t)};var mA=function(a,b,c,d,x,s,t){return IX(c^(b|~d),a,b,x,s,t)};var Bk=function(x,y){x[y>>5]|=128<<y%32;x[(y+64>>>9<<4)+14]=y;var a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(var i=0,l=x.length,bpI,bpJ,bpL,bpO;i<l;i+=16){bpI=a;bpJ=b;bpL=c;bpO=d;a=mc(a,b,c,d,x[i+0],7,-680876936);d=mc(d,a,b,c,x[i+1],12,-389564586);c=mc(c,d,a,b,x[i+2],17,606105819);b=mc(b,c,d,a,x[i+3],22,-1044525330);a=mc(a,b,c,d,x[i+4],7,-176418897);d=mc(d,a,b,c,x[i+5],12,1200080426);c=mc(c,d,a,b,x[i+6],17,-1473231341);b=mc(b,c,d,a,x[i+7],22,-45705983);a=mc(a,b,c,d,x[i+8],7,1770035416);d=mc(d,a,b,c,x[i+9],12,-1958414417);c=mc(c,d,a,b,x[i+10],17,-42063);b=mc(b,c,d,a,x[i+11],22,-1990404162);a=mc(a,b,c,d,x[i+12],7,1804603682);d=mc(d,a,b,c,x[i+13],12,-40341101);c=mc(c,d,a,b,x[i+14],17,-1502002290);b=mc(b,c,d,a,x[i+15],22,1236535329);a=mk(a,b,c,d,x[i+1],5,-165796510);d=mk(d,a,b,c,x[i+6],9,-1069501632);c=mk(c,d,a,b,x[i+11],14,643717713);b=mk(b,c,d,a,x[i+0],20,-373897302);a=mk(a,b,c,d,x[i+5],5,-701558691);d=mk(d,a,b,c,x[i+10],9,38016083);c=mk(c,d,a,b,x[i+15],14,-660478335);b=mk(b,c,d,a,x[i+4],20,-405537848);a=mk(a,b,c,d,x[i+9],5,568446438);d=mk(d,a,b,c,x[i+14],9,-1019803690);c=mk(c,d,a,b,x[i+3],14,-187363961);b=mk(b,c,d,a,x[i+8],20,1163531501);a=mk(a,b,c,d,x[i+13],5,-1444681467);d=mk(d,a,b,c,x[i+2],9,-51403784);c=mk(c,d,a,b,x[i+7],14,1735328473);b=mk(b,c,d,a,x[i+12],20,-1926607734);a=ml(a,b,c,d,x[i+5],4,-378558);d=ml(d,a,b,c,x[i+8],11,-2022574463);c=ml(c,d,a,b,x[i+11],16,1839030562);b=ml(b,c,d,a,x[i+14],23,-35309556);a=ml(a,b,c,d,x[i+1],4,-1530992060);d=ml(d,a,b,c,x[i+4],11,1272893353);c=ml(c,d,a,b,x[i+7],16,-155497632);b=ml(b,c,d,a,x[i+10],23,-1094730640);a=ml(a,b,c,d,x[i+13],4,681279174);d=ml(d,a,b,c,x[i+0],11,-358537222);c=ml(c,d,a,b,x[i+3],16,-722521979);b=ml(b,c,d,a,x[i+6],23,76029189);a=ml(a,b,c,d,x[i+9],4,-640364487);d=ml(d,a,b,c,x[i+12],11,-421815835);c=ml(c,d,a,b,x[i+15],16,530742520);b=ml(b,c,d,a,x[i+2],23,-995338651);a=mA(a,b,c,d,x[i+0],6,-198630844);d=mA(d,a,b,c,x[i+7],10,1126891415);c=mA(c,d,a,b,x[i+14],15,-1416354905);b=mA(b,c,d,a,x[i+5],21,-57434055);a=mA(a,b,c,d,x[i+12],6,1700485571);d=mA(d,a,b,c,x[i+3],10,-1894986606);c=mA(c,d,a,b,x[i+10],15,-1051523);b=mA(b,c,d,a,x[i+1],21,-2054922799);a=mA(a,b,c,d,x[i+8],6,1873313359);d=mA(d,a,b,c,x[i+15],10,-30611744);c=mA(c,d,a,b,x[i+6],15,-1560198380);b=mA(b,c,d,a,x[i+13],21,1309151649);a=mA(a,b,c,d,x[i+4],6,-145523070);d=mA(d,a,b,c,x[i+11],10,-1120210379);c=mA(c,d,a,b,x[i+2],15,718787259);b=mA(b,c,d,a,x[i+9],21,-343485551);a=kq(a,bpI);b=kq(b,bpJ);c=kq(c,bpL);d=kq(d,bpO)}return[a,b,c,d]};var YF=function(bL,bl){var qL=rh(bL,!0);if(qL.length>16)qL=Bk(qL,bL.length*kX);var Gy=Array(16),Gz=Array(16);for(var i=0;i<16;i++){Gy[i]=qL[i]^909522486;Gz[i]=qL[i]^1549556828}var eQ=Bk(Gy.concat(rh(bl,!0)),512+bl.length*kX);return Bk(Gz.concat(eQ),512+128)};var Bn=function(x,cA){x[cA>>5]|=128<<24-cA%32;x[(cA+64>>9<<4)+15]=cA;var w=Array(80),a=1732584193,b=-271733879,c=-1732584194,d=271733878,e=-1009589776;for(var i=0,l=x.length,bqg,bqh,Ne,bqj,bqm;i<l;i+=16){bqg=a;bqh=b;Ne=c;bqj=d;bqm=e;for(var j=0;j<80;j++){w[j]=j<16?x[i+j]:Jg(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);var t=kq(kq(Jg(a,5),bCq(j,b,c,d)),kq(kq(e,w[j]),bCp(j)));e=d;d=c;c=Jg(b,30);b=a;a=t}a=kq(a,bqg);b=kq(b,bqh);c=kq(c,Ne);d=kq(d,bqj);e=kq(e,bqm)}return[a,b,c,d,e]};var YR=function(bL,bl){var qL=rh(bL);if(qL.length>16)qL=Bn(qL,bL.length*kX);var Gy=Array(16),Gz=Array(16);for(var i=0;i<16;i++){Gy[i]=qL[i]^909522486;Gz[i]=qL[i]^1549556828}var eQ=Bn(Gy.concat(rh(bl)),512+bl.length*kX);return Bn(Gz.concat(eQ),512+160)};p.bNZ=function(bL,bl){return Go(YR(bL,bl))};p.bOa=function(bL,bl){return zB(YR(bL,bl))};p.bOb=function(bL,bl){return Jc(YR(bL,bl))};p.bOc=function(bL,bl){return Go(YF(bL,bl),!0)};p.bOd=function(bL,bl){return zB(YF(bL,bl),!0)};p.bOe=function(bL,bl){return Jc(YF(bL,bl),!0)};p.bOi=function(bl){return Go(Bn(rh(bl),bl.length*kX))};p.bOk=function(bl){return zB(Bn(rh(bl),bl.length*kX))};p.bPT=function(bl){return Jc(Bn(rh(bl),bl.length*kX))};p.kk=function(bl){return Go(Bk(rh(bl,!0),bl.length*kX),!0)};p.bOm=function(bl){return zB(Bk(rh(bl,!0),bl.length*kX),!0)};p.bOn=function(bl){return Jc(Bk(rh(bl,!0),bl.length*kX),!0)};p.bOo=function(bl){return Go(rh(bl,!0),!0)}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bC=bd("nej.j"),ce=bd("nej.o"),bm=bd("nej.u"),bi=bd("nej.v"),dY=bd("nej.ui"),bq=bd("nm.d"),bn=bd("nm.x"),bo=bd("nm.l"),bc,bP;bo.bmS=NEJ.C();bc=bo.bmS.bR(bo.fu,!0);bc.dv=function(){this.dC()};bc.df=function(){this.dn();var bk=bb.bS(this.bs,"j-flag");this.Nx=bk[0];this.qQ=bk[1];this.QC=bk[2];bi.bv(bk[3],"click",this.Za.bh(this))};bc.dr=function(){this.dz="ntp-alert"};bc.cB=function(bf){bf.parent=bf.parent||document.body;this.cC(bf);bb.ch(this.Nx,"display","");if(bf.type=="noicon"){bb.ch(this.Nx,"display","none")}else if(bf.type=="success"){bb.gf(this.Nx,"u-icn-88","u-icn-89")}else{bb.gf(this.Nx,"u-icn-89","u-icn-88")}this.qQ.innerHTML=bf.mesg||"";if(bf.mesg2){bb.bM(this.QC,"f-hide");this.QC.innerHTML=bf.mesg2||""}else{bb.bO(this.QC,"f-hide")}};bc.cL=function(){this.cR()};bc.Za=function(be){this.bN("onnotice");this.cs()};bo.fJ=function(bf){if(this.tj){this.tj.bV();delete this.tj}this.tj=bo.bmS.bG(bf);this.tj.bQ()}})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bi=bd("nej.v"),bm=bd("nej.u"),bI=bd("nej.ut"),bq=bd("nm.d"),bn=bd("nm.x"),bo=bd("nm.l"),bL="RADIO_LATEST_MAP",bc,bP;bq.fs({"radio_crt-list":{url:"/api/djradio/get/byuser",format:function(bU,bf){var bk=bU.djRadios;return{total:bk.length||0,list:bk}}},"radio_sub-list":{url:"/api/djradio/get/subed",format:function(bU,bf){var bk=bU.djRadios;bf.data.time=bU.time;return{total:bU.count||0,list:bk}}},"radio_sub-add":{url:"/api/djradio/sub",filter:function(bf){bf.data={id:bf.id}},format:function(bU,bf){if(this.bmV("firstSub")){bo.fJ({title:"订阅成功",type:"noicon",mesg:"可以在“我的音乐-我的电台”收到节目更新"})}else{bo.cj.bQ({tip:"订阅成功"})}var eh=this.ft(bf.id)||bf.ext.data;eh.subCount+=1;eh.subed=true;return eh},finaly:function(be,bf){bi.bN(bq.mJ,"listchange",be);bi.bN(bq.mJ,"itemchange",{attr:"subCount",data:be.data})},onmessage:function(dX){}},"radio_sub-del":{url:"/api/djradio/unsub",filter:function(bf){bf.data={id:bf.id}},format:function(bU,bf){bo.cj.bQ({tip:"取消订阅成功"});var eh=this.ft(bf.id)||bf.ext.data;eh.subCount-=1;eh.subed=false;return eh},finaly:function(be,bf){bi.bN(bq.mJ,"listchange",be);bi.bN(bq.mJ,"itemchange",{attr:"subCount",data:be.data})}}});bq.mJ=NEJ.C();bc=bq.mJ.bR(bq.hd);bc.byQ=function(dy,cK){var cu=this.yI(bL,{});cu[dy.radio.id]={id:dy.id,name:dy.name,time:cK||0};this.sq(bL,cu)};bc.byN=function(bA){return this.yI(bL,{})[bA]};bc.bnc=function(eh){var fE={key:"radio_sub",ext:{}};if(bm.pN(eh)){fE.id=eh.id;fE.ext.data=eh}else{fE.id=eh}return fE};bc.kw=function(eh){if(bn.hn())this.jJ(this.bnc(eh))};bc.bnf=function(eh){bn.hN({btnok:"确定",btncc:"取消",message:"确定取消订阅？",action:function(bB){if(bB=="ok"){this.Ez(this.bnc(eh))}}.bh(this)})};bc.bmV=function(){var px="RADIO_UPGRADE_TIP";return function(bu){var bl=this.yI(px,{});if(bl[bu]){return false}else{bl[bu]=true;this.sq(px,bl);return true}}}();bI.gL.bG({element:bq.mJ,event:["listchange","itemchange"]})})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bi=bd("nej.v"),bI=bd("nej.ut"),bm=bd("nej.u"),bC=bd("nej.j"),bn=bd("nm.x"),bq=bd("nm.d"),bT=bd("nm.w"),bc;var QUEUE_KEY="track-queue";var PlayMode={SINGLE_CYCLE:2,LIST_LOOP:4,RANDOM:5};bT.pP=NEJ.C();bc=bT.pP.bR(bI.ek);bc.cB=function(bf){this.cC(bf);this.cH=bT.gK.jx();this.ij=[];this.sY=[];this.ld=bn.VE();this.eY=0;this.de([[bT.gK,"playaction",this.wz.bh(this)]]);this.kV=bq.lW.bG();this.qR=bq.mJ.bG();this.btB()};bc.cL=function(){this.cR();delete this.ij;delete this.sY;delete this.ld};bc.Kj=function(){bC.tU(QUEUE_KEY,this.ij)};bc.bty=function(){var lO=[PlayMode.SINGLE_CYCLE,PlayMode.LIST_LOOP,PlayMode.RANDOM];return function(){var eU,bt=bm.dS(lO,this.ld.mode);eU=bt<0?PlayMode.LIST_LOOP:lO[(bt+1)%3];this.ld.mode=eU;if(this.CU()){this.WF()}bn.Bx(this.ld);return this.ld.mode}}();bc.btx=function(){return this.ld.mode};bc.oM=function(){this.xD(this.bkJ(+1),"ui")};bc.Ao=function(){this.xD(this.bkJ(-1),"ui")};bc.oz=function(){return this.ij[this.eY]};bc.btv=function(ic,pe,fd){if(!ic||!ic.length)return;var cu={},ur=ic[0];if(!pe){bm.cz(this.ij,function(cn){cu[cn.id]=cn});bm.cz(ic,function(cn){if(cu[cn.id]){if(ur.id==cn.id){ur=cu[cn.id]}}else{this.ij.push(cn)}},this)}else{this.ij=ic}if(this.CU()){this.WF()}if(fd){this.xD(bm.dS(this.ij,ur));this.cH.gx()}this.Kj();bi.bN(bT.pP,"queuechange",{cmd:fd?"play":"addto"})};bc.lH=function(ys){var bt=bm.dS(this.ij,function(cn){return cn.id==ys});if(bt!=-1){var btu=bt==this.eY&&this.ij.length>1,btt=bt==this.ij.length-1,cn=this.ij[bt];this.ij.splice(bt,1);if(this.CU()){this.sY.splice(bm.dS(this.sY,cn),1)}if(btu){if(btt){this.xD(bt-1)}else{this.xD(bt)}}else if(bt<this.eY){this.eY--}this.Kj();bi.bN(bT.pP,"queuechange",{cmd:"delete"})}};bc.wf=function(){this.ij=[];this.sY=[];this.ld.index=this.eY=0;bn.Bx(this.ld);this.Kj();bi.bN(bT.pP,"queuechange",{cmd:"clear"})};bc.oz=function(){return this.ij[this.eY]};bc.bkO=function(){return this.ij};bc.jM=function(){return this.ij.length};bc.WL=function(bA){var bt=bm.dS(this.ij,function(cn){return bA==cn.id});if(bt>=0){return this.ij[bt]}};bc.bts=function(bA){var bt=bm.dS(this.ij,function(cn){return bA==cn.id});if(bt>=0){this.xD(bt);this.cH.gx()}};bc.btB=function(){this.ij=bC.qO(QUEUE_KEY)||[];this.eY=this.ld.index||0;if(this.ij.length&&this.CU()){this.WF()}this.cH.VR(this.oz())};bc.bkJ=function(dV){if(this.CU()){var iM=this.oz(),bt=inRange(bm.dS(this.sY,iM)+dV,this.sY.length);return bm.dS(this.ij,this.sY[bt])}else{return inRange(this.eY+dV,this.ij.length)}function inRange(bt,cA){return bt<0?cA-1:bt>=cA?0:bt}};bc.WF=function(){var bk=this.ij.slice(0);this.sY=[];while(bk.length){var bt=bm.Ew(0,bk.length-1);this.sY.push(bk[bt]);bk.splice(bt,1)}};bc.xD=function(bt,bu){if(!this.ij.length)return;var kd,kF=this.oz(),bkR=this.cH.VY();this.eY=bt;this.ld.index=this.eY;kd=this.ij[this.eY];bn.Bx(this.ld);bi.bN(bT.pP,"playchange",{old:kF,"new":kd,type:bu});this.cH.VR(this.oz());if(kF&&bkR>3){this.kV.Rd(kF.id,bkR,kF.source,bu||"interrupt")}if(kd&&kd.program)this.qR.byQ(kd.program,0)};bc.CU=function(){return this.ld.mode==PlayMode.RANDOM};bc.wz=function(be){if(be.action=="ended"){if(this.ld.mode==PlayMode.SINGLE_CYCLE){this.xD(this.eY,"playend")}else{this.oM()}}};bI.gL.bG({element:bT.pP,event:["queuechange","playchange"]})})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),dW=bd("nej.p"),bC=bd("nej.j"),cP=bd("nej.ui"),bI=bd("nej.ut"),bq=bd("nm.d"),bo=bd("nm.l"),bn=bd("nm.x"),ej=bd("nm.u"),bT=bd("nm.w"),bH=bd("nm.m.f"),bc,bP;bH.bkS=NEJ.C();bc=bH.bkS.bR(cP.fW);bc.dv=function(){this.dC();this.gq=bT.pP.jx();bi.bv(bT.pP,"queuechange",this.sx.bh(this));bi.bv(bT.pP,"playchange",this.ht.bh(this))};bc.dr=function(){this.dz="m-player-panel"};bc.df=function(){this.dn();var bk=bb.bS(this.bs,"j-flag");this.Kb=bk[0];this.km=bk[1];this.He=bk[2];this.cN=bk[3];this.GX=bk[4];this.hD=bT.uo.bG({track:this.GX,slide:bb.dT(this.GX)[0],content:this.cN,speed:4});this.cY={nask:bk[5],nmenu:bk[6],nlist:bk[7],nscroll:bk[8]};bi.bv(this.bs,"click",this.cO.bh(this));bi.bv(this.He,"load",this.xp.bh(this))};bc.cB=function(bf){this.cC(bf);this.lL=bT.bkY.bG(this.cY);this.ht({"new":this.gq.oz()});this.hD.ng();var bk=bb.bS(this.cN,"z-sel");if(bk.length){var cw=bb.lQ(bk[0],this.cN);this.cN.scrollTop=this.cN.scrollTop+(cw.y-(this.cN.scrollTop+112));this.hD.bgy()}};bc.cL=function(){this.bN("onclose");if(this.lL){this.lL.bV();delete this.lL}this.cR()};bc.sx=function(be){bb.fL(this.cN,"m-player-queue",{queue:this.gq.bkO(),current:this.gq.oz()},{dur2time:bn.ni,getArtistName:bn.oj});this.Kb.innerText=this.gq.jM();if(be&&be.cmd=="delete")return;var bk=bb.bS(this.cN,"z-sel");if(bk.length){var cw=bb.lQ(bk[0],this.cN);this.cN.scrollTop=Math.max(Math.min(cw.y,this.cN.scrollTop),cw.y-224);this.hD.bgy()}};bc.cO=function(be){var bj,bA,bkZ;bj=bi.bZ(be,"a:href");if(bj&&bj.tagName.toLocaleLowerCase()=="a"&&/^http/.test(bj.href)){return}bi.qa(be);bj=bi.bZ(be,"d:action");bA=bb.bz(bj,"id");switch(bb.bz(bj,"action")){case"likeall":var iV=this.gq.bkO();if(iV&&iV.length){var bk=[];bm.cz(iV,function(bw){if(!bw.program)bk.push(bw)});window.subscribe(bk,!1);this.bV()}break;case"delete":this.gq.lH(bA);bi.cr(be);break;case"like":var cn=this.gq.WL(bA);window.subscribe(cn,false);bi.cr(be);this.bV();break;case"share":cn=this.gq.WL(bA);!cn.program?bn.tI({rid:cn.id,type:18,purl:cn.album.picUrl,name:cn.name,author:bn.bQg(cn.artists)}):bn.tI({rid:cn.program.id,type:17,purl:cn.program.coverUrl,name:cn.program.name,author:(cn.program.radio||[]).name});bi.cr(be);this.bV();break;case"download":cn=this.gq.WL(bA);if(cn.program){bn.Mj({type:17,id:cn.program.id})}else{bkZ=bn.oB(cn);if(bkZ==1e3){bn.jr("因版权方要求，该歌曲不支持下载")}else{bn.Mj({type:18,id:cn.id})}}this.bV();break;case"play":this.gq.bts(bA);break;case"clear":this.gq.wf();break;case"close":this.bV();break}};bc.ht=function(be){var sM=be["new"];if(sM){this.lL&&this.lL.btr(sM);if(sM.program){this.He.src=sM.program.blurCoverUrl;this.km.innerText=sM.program.name}else{this.He.src="http://music.163.com/api/img/blur/"+(sM.album.pic||sM.album.picId||sM.album.picStr);this.km.innerText=sM.name}}this.sx()};bc.xp=function(be){var eb=this.He.clientHeight,bto=this.cN.parentNode.clientHeight;bb.ch(this.He,"top",(bto-eb)/2+"px")}})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bF=bd("nej.ut"),bc;if(!!bF.Pc)return;bF.Pc=NEJ.C();bc=bF.Pc.bR(bF.ek);bc.cB=function(bf){this.cC(bf);this.Oe=bf.to||ce;this.GA=bf.from||{};this.bxR=Math.max(0,parseInt(bf.delay)||0)};bc.cL=function(){this.cR();this.cr();if(!!this.Gn){window.clearTimeout(this.Gn);delete this.Gn}delete this.Oe;delete this.GA};bc.bpP=function(cK){if(!this.GA)return;if((""+cK).indexOf(".")>=0)cK=+(new Date);if(this.bpR(cK)){this.cr();return}this.fz=requestAnimationFrame(this.bpP.bh(this))};bc.bpR=cv;bc.gx=function(){var bxQ=function(){this.Gn=window.clearTimeout(this.Gn);this.GA.time=+(new Date);this.fz=requestAnimationFrame(this.bpP.bh(this))};return function(){this.Gn=window.setTimeout(bxQ.bh(this),this.bxR);return this}}();bc.cr=function(){this.fz=cancelRequestAnimationFrame(this.fz);this.bN("onstop");return this}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bm=bd("nej.u"),bF=bd("nej.ut"),bc,bP;if(!!bF.xM)return;bF.xM=NEJ.C();bc=bF.xM.bR(bF.Pc);bP=bF.xM.dI;bc.cB=function(bf){this.cC(bf);this.Pj=bf.duration||200;this.bxP=1/(200*this.Pj);this.bxO(bf.timing);this.bxN()};bc.cL=function(){this.cR();delete this.Ak;delete this.Pl};bc.bxO=function(){var fV=/^cubic\-bezier\((.*?)\)$/i,iU=/\s*,\s*/i,bqc={linear:[0,0,1,1],ease:[.25,.1,.25,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[0,0,.58,1]};var bxM=function(bB,bt,bk){bk[bt]=parseFloat(bB)};return function(Oc){Oc=(Oc||"").toLowerCase();this.Ak=bqc[Oc];if(fV.test(Oc)){this.Ak=RegExp.$1.split(iU);bm.cz(this.Ak,bxM)}if(!!this.Ak)return;this.Ak=bqc.ease}}();bc.bxN=function(){var Ah=this.Ak,Po=3*Ah[0],bqk=3*(Ah[2]-Ah[0])-Po,bxL=1-Po-bqk,Pp=3*Ah[1],bqq=3*(Ah[3]-Ah[1])-Pp,bxK=1-Pp-bqq;this.Pl={ax:bxL,ay:bxK,bx:bqk,by:bqq,cx:Po,cy:Pp}};bc.bxJ=function(){var bqv=function(cK,nd){return((nd.ax*cK+nd.bx)*cK+nd.cx)*cK};var bxF=function(cK,nd){return((nd.ay*cK+nd.by)*cK+nd.cy)*cK};var bxE=function(cK,nd){return(3*nd.ax*cK+2*nd.bx)*cK+nd.cx};var bxD=function(cK,bqH,nd){var t0,t1,t2,x2,d2,i;for(t2=cK,i=0;i<8;i++){x2=bqv(t2,nd)-cK;if(Math.abs(x2)<bqH)return t2;d2=bxE(t2,nd);if(Math.abs(d2)<1e-6)break;t2=t2-x2/d2}t0=0;t1=1;t2=cK;if(t2<t0)return t0;if(t2>t1)return t1;while(t0<t1){x2=bqv(t2,nd);if(Math.abs(x2-cK)<bqH)return t2;if(cK>x2)t0=t2;else t1=t2;t2=(t1-t0)*.5+t0}return t2};return function(dV){return bxF(bxD(dV/this.Pj,this.bxP,this.Pl),this.Pl)}}();bc.bpR=function(cK){var dV=cK-this.GA.time,ta=this.bxJ(dV),cw=bm.CQ(this.GA.offset*(1-ta)+this.Oe.offset*ta,2),pt=!1;if(dV>=this.Pj){cw=this.Oe.offset;pt=!0}this.bN("onupdate",{offset:cw});return pt};bc.cr=function(){this.bN("onupdate",{offset:this.Oe.offset});bP.cr.apply(this,arguments);return this}})();
(function(){var bd=NEJ.P,bF=bd("nej.ut"),bc;if(!!bF.zT)return;bF.zT=NEJ.C();bc=bF.zT.bR(bF.xM);bc.cB=function(bf){bf=NEJ.X({},bf);bf.timing="easein";this.cC(bf)}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bi=bd("nej.v"),bF=bd("nej.ut"),sm;bF.zc=NEJ.C();sm=bF.zc.bR(bF.ek);sm.cB=function(bf){this.cC(bf);this.bvE=!!bf.reset;this.Oy=parseInt(bf.delta)||0;this.is=bb.bD(bf.track);this.beW=bb.bD(bf.progress);this.de([[bf.thumb,"mousedown",this.bvD.bh(this)],[document,"mousemove",this.beY.bh(this)],[document,"mouseup",this.Su.bh(this)],[this.is,"mousedown",this.bvC.bh(this)]]);var iu=bf.value;if(iu==null){iu=this.beW.offsetWidth/this.is.offsetWidth}this.gn(iu)};sm.cL=function(){if(!!this.bvE)this.ME(0);this.cR()};sm.bvD=function(be){if(!!this.hE)return;bi.cr(be);this.hE=bi.nl(be);this.bfc=this.is.offsetWidth};sm.beY=function(be){if(!this.hE)return;var cw=bi.nl(be),dV=cw-this.hE;this.hE=cw;this.ME(this.Ba+dV/this.bfc);this.bN("onslidechange",{ratio:this.Ba})};sm.Su=function(be){if(!this.hE)return;this.beY(be);delete this.hE;delete this.bfc;this.bN("onslidestop",{ratio:this.Ba})};sm.bvC=function(be){var bvB=bb.lQ(this.is).x,bvA=bi.nl(be);this.ME((bvA-bvB+this.Oy)/this.is.offsetWidth);this.bN("onslidestop",{ratio:this.Ba})};sm.ME=function(iu){this.Ba=Math.max(0,Math.min(1,iu));bb.ch(this.beW,"width",this.Ba*100+"%")};sm.gn=function(iu){if(!!this.hE)return;this.ME(iu)};sm.Uv=function(iu){return this.Ba}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),fO=bd("nm.ut");fO.byA=function(){var PP=function(cI,eR,ma,lZ,tJ){if(ma<lZ){var xA=Math.floor((ma+lZ)/2);PP(cI,eR,ma,xA,tJ);PP(cI,eR,xA+1,lZ,tJ);byz(cI,eR,ma,xA,lZ,tJ)}};var byz=function(cI,eR,ma,xA,lZ,tJ){var i=ma,j=xA+1,k=ma;while(i<=xA&&j<=lZ){if(tJ(cI[i],cI[j])<=0){eR[k++]=cI[i++]}else{eR[k++]=cI[j++]}}while(i<=xA){eR[k++]=cI[i++]}while(j<=lZ){eR[k++]=cI[j++]}for(i=ma;i<=lZ;i++){cI[i]=eR[i]}};var byy=function(jE,byv){return jE<byv};return function(cI,tJ){if(!cI||cI.length==0)return cI;tJ=tJ||byy;PP(cI,new Array(cI.length),0,cI.length-1,tJ);return cI}}();fO.PC=function(){var fV=/\r\n|\r|\n/,iU=/\[(.*?)\]/gi,Pw={ar:"artist",ti:"track",al:"album",offset:"offset"};var Pu=function(bp,jf){var cI=[];jf=jf.replace(iU,function($1,$2){var cK=Pr.call(this,bp,$2);if(cK!=null){cI.push({time:cK,tag:$2});bp.scrollable=!0}return""}.bh(this)).trim();if(!cI.length){if(!jf||jf.length==0)return;cI.push({time:-1})}bm.cz(cI,function(bw){bw.lyric=jf});var rG=bp.lines;rG.push.apply(rG,cI)};var Pr=function(bp,cK){var cI=cK.split(":"),rm=cI.shift(),bL=Pw[rm];if(!!bL){bp[bL]=cI.join(":");return null}rm=parseInt(rm);if(isNaN(rm)){return null}else{var cw=parseInt(bp.offset)||0;return rm*60+parseFloat(cI.join("."))+cw/1e3}};var Pi=function(Pd,Pb){return Pd.time-Pb.time};return function(bA,cm){var bp={id:bA,lines:[],scrollable:!1,source:cm};bm.cz((cm||"").trim().split(fV),Pu.bh(null,bp));if(bp.scrollable){fO.byA(bp.lines,Pi);var bt;for(var i=0;i<bp.lines.length;i++){if(!!bp.lines[i].lyric){bt=i;break}}bp.lines.splice(0,bt)}return bp}}();fO.boa=function(rl,Oh){var OU=fO.PC(0,rl),OT=fO.PC(0,Oh);if(OU.scrollable&&OT.scrollable){bm.cz(OU.lines,function(bw){var Ok=getTranslate(bw.time);if(Ok){bw.lyric=bw.lyric+"<br>"+Ok.lyric}})}return OU;function getTranslate(cK){var bt=bm.dS(OT.lines,function(bw){return bw.time==cK});if(bt!=-1){return OT.lines[bt]}}}})();
(function(){var bF=NEJ.P("nej.ut"),bqL;if(!!bF.xN)return;bF.xN=NEJ.C();bqL=bF.xN.bR(bF.xM);bqL.cB=function(bf){bf=NEJ.X({},bf);bf.timing="linear";this.cC(bf)}})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),bC=bd("nej.j"),bm=bd("nej.u"),bn=bd("nm.x"),bo=bd("nm.l"),bq=bd("nm.d");var bog=function(bl){if(bl.errorType==6||bl.errorType==7||bl.errorType==8){if(!bn.hn())return;bn.lR({txt:"m-report-point",title:"提示",onaction:boh.bh(this,bl)})}else{boh(bl)}};var byu=function(be){var bj=bi.bZ(be,"d:action");if(bb.bz(bj,"action")=="feedLyric"){bi.cr(be);var dX=bb.bz(bj,"code"),bl={songId:bb.bz(bj,"id"),errorType:dX};bog(bl)}};var boh=function(bl,be){if(!be||be.action=="ok"){bC.cE("/api/v1/feedback/lyric",{type:"json",method:"post",data:bm.eJ(bl),onload:function(be){if(be.code==200){bo.cj.bQ({tip:"提交成功"});if(bm.gP(bl.onok)){bl.onok()}}else if(be.code==-2){bn.hN({title:"提示",message:"您的积分不足",btnok:"赚积分",action:function(co){if(co=="ok"){location.dispatch2("/store/gain/index")}}})}else{bo.cj.bQ({type:2,tip:"提交失败"})}}})}};bn.bok=function(bj){var bj=bj||document.body,ny=byu.bh(this);bi.bv(bj,"click",ny);return{destroy:function(){bi.oN(bj,"click",ny)}}};bn.bOE=function(bl){bog(bl)}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bC=bd("nej.j"),bI=bd("nej.ut"),bF=bd("nej.p"),bq=bd("nm.d"),bn=bd("nm.x"),bo=bd("nm.l"),ej=bd("nm.ut"),bT=bd("nm.w"),bc,bP;var WT={};bT.bkY=NEJ.C();bc=bT.bkY.bR(bI.ek);bc.cB=function(bf){this.cC(bf);this.cN=bf.nlist;this.Fs=bf.nmenu;this.blf=bf.nask;this.rw={track:bf.nscroll,slide:bb.dT(bf.nscroll)[0],content:this.cN,speed:4};this.WV=this.xr.bh(this);this.de([[bf.nask,"click",this.btm.bh(this)],[this.rw.slide,"mousedown",this.LS.bh(this)],[document,"mouseup",this.LP.bh(this)],[bT.gK,"playaction",this.wz.bh(this)]]);if(bF.dU.browser!="firefox"){this.de([[this.cN,"mousewheel",this.WV]])}else{this.cN.addEventListener("DOMMouseScroll",this.WV,false)}this.hD=bT.uo.bG(this.rw);this.WX=bn.bok(this.cN);this.cH=bT.gK.jx()};bc.cL=function(){this.cR();delete this.sN;delete this.pQ;delete this.JV;if(this.WX){this.WX.destroy();delete this.WX}if(bF.dU.browser=="firefox"){this.cN.removeEventListener("DOMMouseScroll",this.WV)}bb.ch(this.Fs,"display","none")};bc.btm=function(){if(bb.eG(this.Fs,"display")=="none"){bb.ch(this.Fs,"display","block")}else{bb.ch(this.Fs,"display","none")}};bc.Xb=function(){var jO=0;return function(Ev){clearTimeout(jO);this.JV=true;if(this.pQ){this.pQ.bV();delete this.pQ}if(!Ev){jO=setTimeout(function(){delete this.JV}.bh(this),3e3)}}}();bc.xr=function(){this.Xb()};bc.LS=function(){this.Xb(true)};bc.wz=function(be){if(be.action=="timeupdate"){this.blo(be.data.time,true)}};bc.blo=function(cK,btl){if(!(this.sN&&this.sN.scrollable)||this.JV)return;var i=this.sN.lines.length-1,ii,dV,bt=-1,blq=0,ik=0;for(;i>=0;i--){ii=this.sN.lines[i];dV=ii.time-cK;if(dV<0&&(i>0||dV<=-2)){bt=i;break}}for(var j=0,jj;j<this.Xc.length;j++){jj=this.Xc[j];if(j<bt){blq+=jj.clientHeight}if(bt==j){bb.bO(jj,"z-sel")}else{bb.bM(jj,"z-sel")}}if(bt<0||bb.lQ(this.Xc[bt],this.cN).y<96){ik=0}else{ik=blq-96}if(Math.abs(ik-this.cN.scrollTop)<=4||this.pQ)return;if(btl){var fE={from:{offset:this.cN.scrollTop},to:{offset:ik},duration:500,onupdate:function(be){this.cN.scrollTop=be.offset;this.hD.Br(this.cN.scrollTop/(this.cN.scrollHeight-this.cN.clientHeight))}.bh(this),onstop:function(){if(this.pQ){this.pQ.bV();delete this.pQ}}.bh(this)};this.pQ=bI.xN.bG(fE);this.pQ.gx()}else{this.cN.scrollTop=ik;this.hD.Br(this.cN.scrollTop/(this.cN.scrollHeight-this.cN.clientHeight))}};bc.btr=function(cn){this.JU=cn;delete this.sN;if(cn&&!cn.program){var cg="/api/song/lyric",cG={id:cn.id,lv:-1,tv:-1};if(WT[cn.id]){this.Xe(WT[cn.id])}else{bC.cE(cg,{sync:false,type:"json",query:cG,method:"get",onload:this.Xe.gD(this,cn.id),onerror:this.Xe.bh(this)})}bb.bM(this.blf,"f-hide")}else{bb.bO(this.blf,"f-hide");this.LL({})}};bc.Xe=function(be,bA){if(be.code==200){if(bA){WT[bA]=be}var rl=be.lrc||{},Ok=be.tlyric||{};if(!rl.lyric){this.LL(be)}else{this.sN=ej.boa(rl.lyric,Ok.lyric);be.scrollable=this.sN.scrollable;bb.fL(this.cN,"m-lyric-line",{id:this.JU.id,lines:this.sN.lines,scrollable:this.sN.scrollable});this.Xc=bb.bS(this.cN,"j-flag")}be.songId=this.JU.id;bb.fL(this.Fs,"m-player-lyric-ask",be)}else{}if(this.pQ){this.pQ.bV();delete this.pQ}this.hD.ng();this.blo(this.cH.VY()||0,false)};bc.LP=function(){if(this.JV){this.Xb()}};bc.LL=function(bl){if(this.JU.program){this.cN.innerHTML='<div class="nocnt nolyric"><span class="s-fc4">电台节目，无歌词</span></div>'}else if(bl.nolyric){this.cN.innerHTML='<div class="nocnt nolyric"><span class="s-fc4">纯音乐，无歌词</span></div>'}else{this.cN.innerHTML='<div class="nocnt nolyric"><span class="s-fc4">暂时没有歌词</span><a data-action="feedLyric" data-code="6"'+"data-id="+this.JU.id+' href="#" class="f-tdu">求歌词</a></div>'}this.hD&&this.hD.ng()}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),dW=bd("nej.p"),bC=bd("nej.j"),bI=bd("nej.ut"),bq=bd("nm.d"),bo=bd("nm.l"),bn=bd("nm.x"),ej=bd("nm.u"),bT=bd("nm.w"),bH=bd("nm.m.f"),gC=bd("player"),bc,bP;bH.EI=NEJ.C();bc=bH.EI.bR(bI.ek);bc.dv=function(){this.dC();this.JK=bb.bD("g_player");this.nM=this.JK.parentNode;var bk=bb.bS(this.JK,"j-flag");this.gu=bk[0];this.pq=bk[1];this.km=bk[2];this.Ae=bk[3];this.jS=bk[4];this.hY=bk[5];bk=bb.dT(bk[6]);this.uY=bk[0];this.JQ=bk[1];this.blz=bk[2];this.Kb=bk[3];this.Xk=bk[4];this.Xl=bb.dT(this.Kb)[0];this.va=bn.VE();this.JO(3e3);this.Xo();this.btk();this.btj();this.blH();gC.setLike=this.blI.bh(this);bi.bv(this.nM,"click",this.cO.bh(this));bi.bv(bT.gK,"playaction",this.wz.bh(this));bi.bv(bT.pP,"queuechange",this.sx.bh(this));bi.bv(bT.pP,"playchange",this.ht.bh(this));bi.bv(this.nM,dW.dU.browser=="ie"?"mouseleave":"mouseout",this.blJ.bh(this,!1));bi.bv(this.nM,dW.dU.browser=="ie"?"mouseenter":"mouseover",this.blJ.bh(this,!0));bi.bv(document,"keyup",this.blK.bh(this));bi.bv(window,"iframeclick",this.pD.bh(this));bi.bv(document,"click",this.pD.bh(this));bi.bv(this.uY,"click",bi.cr.bh(bi));gC.hotkeys=this.blK.bh(this);this.blL=bm.oh()};bc.blH=function(){if(this.va.lock){bb.bM(this.nM,"m-playbar-unlock");bb.bO(this.nM,"m-playbar-lock")}else{bb.bO(this.nM,"m-playbar-unlock");bb.bM(this.nM,"m-playbar-lock")}};bc.Xo=function(){var bk=bb.dT(this.Ae);this.blM=bk[0];this.JM=bb.dT(bk[1])[0];this.blO=bI.zc.bG({track:this.Ae,thumb:this.JM,progress:bk[1],onslidestop:function(be){this.blP=false;this.cH.ou(this.cH.VW()*be.ratio)}.bh(this),onslidechange:function(be){this.blP=true;this.Xr({time:be.ratio*this.cH.VW(),duration:this.cH.VW()})}.bh(this)})};bc.btj=function(){var bk=bb.bS(this.uY,"j-t"),iu=bk[1],uE=this.va.volume;if(uE==null){uE=.8}this.HC=bI.At.bG({track:bk[0],slide:bk[2],onchange:function(be){var bB=1-be.y.rate,eb=93*bB;bb.ch(iu,"height",eb+"px");eb>0?bb.bM(this.JQ,"icn-volno"):bb.bO(this.JQ,"icn-volno");this.cH.mZ(bB);this.va.volume=bB;bn.Bx(this.va)}.bh(this)});this.HC.gn({x:0,y:1-uE})};bc.btk=function(){var cG=bm.im(location.hash.slice(1))||{},bu=cG["__media"]||this.va.useFlash&&"flash"||"auto";this.cH=bT.gK.jx({media:bu});this.gq=bT.pP.jx();gC.addTo=function(ic,pe,fd){this.gq.btv(JSON.parse(JSON.stringify(ic)),pe,fd)}.bh(this);gC.tipPlay=this.Xs.bh(this);gC.getPlaying=function(){return{track:this.gq.oz(),playing:this.cH.sj()}}.bh(this);gC.pause=this.cH.hO.bh(this.cH);var iM=this.gq.oz();if(iM){this.blS(iM)}this.blT(this.gq.btx());this.blU()};bc.sx=function(){var jO=0;return function(be){if(be.cmd=="play"||be.cmd=="addto"){this.Xs(be.cmd=="play"?"已开始播放":"已添加到播放列表")}this.blU()}}();bc.ht=function(be){var cn=be["new"];this.blS(cn);if(this.cH.sj()){document.title=decodeURIComponent("%E2%96%B6%20")+cn.name}bi.bN(window,"playchange",{trackId:cn.id,track:cn})};bc.cO=function(be){var bj=bi.bZ(be,"d:action"),co=bb.bz(bj,"action"),qG=bi.bZ(be,"a:href");if(qG&&qG.tagName.toLocaleLowerCase()=="a"&&/^http/.test(qG.href)){this.bV();return}else{bi.cr(be)}switch(co){case"lock":this.va.lock=!bb.cW(this.nM,"m-playbar-lock");bn.Bx(this.va);this.blH();break;case"prev":this.gq.Ao();break;case"next":this.gq.oM();break;case"play":this.cH.gx();break;case"pause":this.cH.hO();break;case"like":var cn=this.gq.oz();if(cn){window.subscribe(cn,cn.program)}!cn.program&&this.pE&&this.pE.bV();break;case"share":var cn=this.gq.oz();if(cn){!cn.program?bn.tI({rid:cn.id,type:18,purl:cn.album.picUrl,name:cn.name,author:bn.bQg(cn.artists)}):bn.tI({rid:cn.program.id,type:17,purl:cn.program.coverUrl,name:cn.program.name,author:(cn.program.radio||[]).name})}this.pE&&this.pE.bV();break;case"mode":this.blT(this.gq.bty(),true);break;case"volume":bi.cr(be);if(this.uY.style.visibility!="hidden"){bb.ch(this.uY,"visibility","hidden")}else{bb.ch(this.uY,"visibility","visible")}break;case"panel":bi.cr(be);if(!this.pE){this.pE=bH.bkS.bG({parent:this.nM,onclose:function(){delete this.pE;this.JO()}.bh(this)})}else{if(this.pE){this.pE.bV();delete this.pE}}break}};bc.Xr=function(be){this.jS.innerHTML=bn.fs("<em>{0}</em> / {1}",bn.ni(be.time),bn.ni(be.duration))};bc.blT=function(eU,dJ){var cu={2:{icn:"icn-one",title:"单曲循环"},4:{icn:"icn-loop",title:"循环"},5:{icn:"icn-shuffle",title:"随机"}},ci=cu[eU];bb.gf(this.blz,"icn-one icn-loop icn-shuffle",ci.icn);this.Xk.innerText=this.blz.title=ci.title;clearTimeout(this.bth);if(dJ){bb.ch(this.Xk,"display","");this.bth=setTimeout(function(){bb.ch(this.Xk,"display","none")}.bh(this),2e3)}};bc.blI=function(dy){var iM=this.gq.oz();if(iM&&iM.program&&iM.program.id==dy.id){iM.program.liked=dy.liked;this.hY.title="赞";if(dy.liked){bb.gf(this.hY,"icn-zan","icn-yizan")}else{bb.gf(this.hY,"icn-yizan","icn-zan")}this.gq.Kj()}};bc.blS=function(cn){var dk;bb.ch(this.blM,"width",0);this.Xr(0);this.blO.gn(0);if(cn){dk=this.btg(cn);if(cn.program){bb.gf(this.hY,"icn-add","icn-zan");this.hY.title="赞";bC.pn(this.oW);this.oW=bC.cE("/api/dj/program/detail",{type:"json",query:{id:cn.program.id},onload:function(be){if(be.code==200){this.blI(be.program)}}.bh(this)})}else{bb.gf(this.hY,"icn-zan icn-yizan","icn-add");this.hY.title="收藏"}this.pq.innerHTML=bn.fs('<img src="{0}?param=34y34"><a href="{1}" hidefocus="true" class="mask"></a>',dk.cover,dk.titleUrl);bb.fL(this.km,"m-player-playinfo",dk)}};bc.blU=function(){var bk=bb.dT(this.Kb);bk[1].innerText=this.gq.jM()};bc.btg=function(cn){var bp={duration:cn.duration,cover:"http://s4.music.126.net/style/web2/img/default_album.jpg",source:cn.source};if(cn.program){bp.type="program";bp.name=bm.eO(cn.program.name);bp.cover=cn.program.coverUrl;bp.titleUrl="/program?id="+cn.program.id;bp.artistHtml=bn.fs('<a hidefocus="true" href="/radio?id={0}" title="{1}">{1}</a>',cn.program.radio.id,bm.eO(cn.program.radio.name))}else{bp.type="song";bp.name=cn.name;bp.mvid=cn.mvid;if(!cn.album){cn.album={}}if(cn.album.pic&&cn.album.picUrl){bp.cover=cn.album.picUrl}bp.titleUrl="/song?id="+cn.id;bp.artistHtml=bn.oj(cn.artists)}return bp};bc.wz=function(be){var bl=be.data;switch(be.action){case"play":bb.bO(this.gu,"pas");bb.bz(this.gu,"action","pause");bC.gz("playerid",this.blL);var cn=this.gq.oz();if(cn){document.title=decodeURIComponent("%E2%96%B6%20")+cn.name}bi.bN(window,"playstatechange",be);break;case"pause":bb.bM(this.gu,"pas");bb.bz(this.gu,"action","play");document.title=this.btf()||"网易云音乐 听见好时光";break;case"timeupdate":if(this.blP)return;var hZ=bC.gz("playerid");if(hZ&&hZ!==this.blL){this.cH.hO()}this.blO.gn(bl.time/bl.duration);this.Xr(bl);break;case"progress":bb.ch(this.blM,"width",bl.loaded*100/bl.total+"%");break;case"error":this.Xs("播放失败");bb.bM(this.JM,"z-load");break;case"playing":bb.bM(this.JM,"z-load");break;case"waiting":bb.bO(this.JM,"z-load");break}};bc.Xs=function(){var jO=0;return function(hw){if(hw){this.Xl.innerText=hw;bb.ch(this.Xl,"display","");clearTimeout(jO);jO=setTimeout(function(){bb.ch(this.Xl,"display","none")}.bh(this),2e3);this.CD(true);this.JO(2e3)}}}();bc.blJ=function(vh,be){if(!this.pE){if(vh){if(!bn.NJ(this.nM,be.relatedTarget||be.fromElement)){this.CD(true)}}else{if(!bn.NJ(this.nM,be.relatedTarget||be.toElement)){this.JO()}}}};bc.JO=function(tN){clearTimeout(this.bmc);this.bmc=setTimeout(function(){if(!this.va.lock){this.CD(false)}}.bh(this),tN||500)};bc.CD=function(){var tm,JG=true;return function(kl){clearTimeout(this.bmc);if(tm||kl==JG)return;JG=kl;tm=bI.zT.bG({to:{offset:kl?-53:-7},from:{offset:kl?-7:-53},onstop:function(){tm.bV();tm=null},onupdate:function(be){bb.ch(this.nM,"top",be.offset+"px")}.bh(this),duration:kl?100:350});tm.gx()}}();bc.blK=function(be){if(be.keyCode==80&&!bn.bbX()){this.cH.sj()?this.cH.hO():this.cH.gx()}else if(be.ctrlKey){switch(be.keyCode){case 37:this.gq.Ao();break;case 39:this.gq.oM();break}}};bc.pD=function(){bb.ch(this.uY,"visibility","hidden");this.pE&&this.pE.bV()};bc.btf=function(){var fl=bb.bD("g_iframe");if(fl){return fl.contentWindow.document.title}else{return""}};bc.bQ=function(){bb.ch(this.nM,"visibility","visible")};bc.cs=function(){this.cH.hO();bb.ch(this.nM,"visibility","hidden")}})();
(function(){var bd=NEJ.P,eN=window,cv=NEJ.F,bC=bd("nej.j"),bn=bd("nm.x"),bq=bd("nm.d"),bc,bP;bq.fs({"netease-login":{url:"/api/login/",onload:"onlogin",onerror:"onloginerror"},"captcha-send":{url:"/api/sms/captcha/sent/",onload:"onsendcaptcha",onerror:"onsendcaptchaerror",format:function(bp,bf){bp.mobile=bf.data.cellphone;return bp}},"captcha-verify":{url:"/api/sms/captcha/verify/",onload:"onverifycaptcha",onerror:"onverifycaptchaerror",format:function(bp,bf){bp.mobile=bf.data.cellphone;bp.captcha=bf.data.captcha;return bp}},"mobile-login":{url:"/api/login/cellphone/",onload:"onmobilelogin",onerror:"onmobileloginerror"},"mobile-check":{url:"/api/cellphone/existence/check/",onload:"onmobilecheck",onerror:"onmobilecheckerror",format:function(bp,bf){bp.mobile=bf.data.cellphone;bp.captcha=bf.data.captcha;return bp}},"mobile-regist":{url:"/api/register/cellphone",onload:"onmobileregist",onerror:"onmobileregisterror"},"mobile-updatepwd":{url:"/api/login/password/update",onload:"onmobileupdatepwd",onerror:"onmobileupdatepwderror",format:function(bp,bf){bp.mobile=bf.data.phone;bp.password=bf.data.password;return bp}},"mobile-resetpwd":{url:"/api/login/password/reset",onload:"onmobileresetpwd",onerror:"onmobileresetpwderror",format:function(bp,bf){bp.mobile=bf.data.phone;bp.password=bf.data.password;return bp}},"nickname-set":{url:"/api/activate/initProfile",onload:"onactive",onerror:"onactiveerror"},logout:{url:"/logout",onload:"onlogout"},"logout-quiet":{url:"/logout"},"oauth-nickname":{url:"/oauth/init_profile",onload:"onactive",onerror:"onactiveerror"},"mobile-nickname":{url:"/oauth/register/cellphone",onload:"onmobileregist",onerror:"onmobileregisterror"},"mobile-bind":{url:"/api/user/bindingCellphone",onload:"onmobilebind",onerror:"onmobilebinderror",format:function(bp,bf){bp.mobile=bf.data.phone;bp.captcha=bf.data.captcha;return bp}},"mobile-relogin":{url:"/api/mainAccount/set",onload:"onmobilelogin",onerror:"onmobileloginerror"},"mainaccount-replace":{url:"/api/user/replaceMainAccount",onload:"onmainaccountreplace",onerror:"onmainaccountreplaceerror"},"binding-delete":{url:"/api/user/deleteBinding",onload:"ondeletebinding",onerror:"ondeletebindingerror"},"mobile-change":{url:"/api/v1/user/replaceCellphone",onload:"onchangemobile",onerror:"onchangemobileerror"},"urs-bind":{url:"/api/user/bindingUrs",onload:"onbindurs",onerror:"onbindurserror"}});bq.lb=NEJ.C();bc=bq.lb.bR(bq.hd);bc.bCL=function(bf){bf=bf||{};this.dD(bq.bD("logout"),bf)};bc.bNS=function(bf){bf=bf||{};this.dD(bq.bD("logout-quiet"),bf)};bc.bnW=function(bf){this.dD(bq.bD("netease-login"),bf)};bc.xG=function(bf){this.dD(bq.bD("captcha-send"),bf)};bc.bCI=function(bf){this.dD(bq.bD("captcha-verify"),bf)};bc.bCG=function(bf){this.dD(bq.bD("mobile-login"),bf)};bc.Xx=function(bf){this.dD(bq.bD("mobile-check"),bf)};bc.JI=function(bf){this.dD(bq.bD("mobile-regist"),bf)};bc.bNT=function(bf){this.dD(bq.bD("mobile-resetpwd"),bf)};bc.JH=function(bf){this.dD(bq.bD("mobile-updatepwd"),bf)};bc.XB=function(bf){this.dD(bq.bD("nickname-set"),bf)};bc.bNU=function(bf){this.dD(bq.bD("oauth-nickname"),bf)};bc.bNW=function(bf){this.dD(bq.bD("mobile-nickname"),bf)};bc.XF=function(bf){this.dD(bq.bD("mobile-bind"),bf)};bc.bNX=function(bf){this.dD(bq.bD("mobile-relogin"),bf)};bc.bNY=function(bf){this.dD(bq.bD("mainaccount-replace"),bf)};bc.XJ=function(bf){this.dD(bq.bD("binding-delete"),bf)};bc.bCx=function(bf){this.dD(bq.bD("mobile-change"),bf)};bc.bCw=function(bf){this.dD(bq.bD("urs-bind"),bf)}})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),bC=bd("nej.j"),bI=bd("nej.ut"),cP=bd("nej.ui"),bm=bd("nej.u"),bn=bd("nm.x"),bq=bd("nm.d"),bT=bd("nm.w"),bc;bT.AL=NEJ.C();bc=bT.AL.bR(cP.fW);bc.cB=function(bf){this.cC(bf);if(bf.txt){this.bs.innerHTML=bb.jn(bf.txt)}else if(bf.html){this.bs.innerHTML=bf.html}this.wl=bf.captchaId;var bk=bb.bS(this.bs,"j-flag");this.gS=bk[0];this.gi=bk[1];this.de([[this.gi,"click",this.Yj.bh(this)],[this.gS,"keypress",this.bCv.bh(this)]]);this.gi.src="/captcha?id="+this.wl};bc.cL=function(){this.cR()};bc.Yj=function(){bC.cE("/api/image/captcha/verify/hf",{type:"json",query:{id:this.wl,captcha:0},onload:function(bp){if(bp.code==200){this.wl=bp.captchaId;this.gi.src="/captcha?id="+this.wl}}.bh(this)})};bc.bCv=function(be){if(be.keyCode==13)this.bN("onaction",be)};bc.tM=function(){var bp={},dX=this.gS.value;if(!dX){bp.message="请输入验证码"}else{bC.cE("/api/image/captcha/verify/hf",{type:"json",sync:true,query:{id:this.wl,captcha:dX},onload:cbVerify.bh(this),onerror:cbVerify.bh(this)})}return bp;function cbVerify(be){if(be.code==200){if(be.result){bp.success=true}else{bp.message="验证码错误";if(be.captchaId){this.wl=be.captchaId;this.gi.src="/captcha?id="+this.wl}}}else{bp.message="验证出错"}}};bc.fA=function(){return this.gS.value};bc.ym=function(){return this.wl};bc.bO=function(Yr){bb.bO(this.gS,Yr)};bc.bM=function(Yr){bb.bM(this.gS,Yr)}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bi=bd("nej.v"),bb=bd("nej.e"),bC=bd("nej.j"),bo=bd("nm.l"),bT=bd("nm.w"),dY=bd("nej.ui"),bq=bd("nm.d"),bn=bd("nm.x"),bc,bP;bo.Yt=NEJ.C();bc=bo.Yt.bR(bo.fu);bP=bo.Yt.dI;bc.df=function(){this.dn();var bk=bb.bS(this.bs,"j-flag");this.gS=bk[0];this.gb=bk[1];bi.bv(this.bs,"click",this.cO.bh(this))};bc.dr=function(){this.dz="m-captcha-layer"};bc.cB=function(bf){bf.clazz="m-layer-captcha";bf.parent=bf.parent||document.body;bf.title="输入验证码";bf.draggable=!0;bf.destroyable=true;bf.mask=true;this.cC(bf);this.dg=bT.AL.bG({parent:this.gS,html:'<input class="u-txt txt f-fl j-flag"/><img class="captcha f-fl j-flag" src=""/>',captchaId:bf.captchaId})};bc.cL=function(){this.bN("ondestroy");this.cR();if(this.dg){this.dg.bV();delete this.dg}};bc.cO=function(be){var bj=bi.bZ(be,"d:action");switch(bb.bz(bj,"action")){case"ok":var dk=this.dg.tM();if(!dk.success){this.gb.innerHTML='<i class="u-icn u-icn-25"></i>'+dk.message;bb.bM(this.gb,"f-hide")}else{bb.bO(this.gb,"f-hide");this.cs()}break;case"cc":this.cs();break}};bn.boQ=function(bf){bo.Yt.bG(bf).bQ()}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bC=bd("nej.j"),ce=bd("nej.o"),bm=bd("nej.u"),bi=bd("nej.v"),dY=bd("nej.ui"),bq=bd("nm.d"),bn=bd("nm.x"),bo=bd("nm.l"),bc,bP;bo.nw=NEJ.C();bc=bo.nw.bR(bo.fu,!0);bc.dv=function(){this.dC()};bc.df=function(){this.dn();var bk=bb.bS(this.bs,"j-flag");this.qQ=bk[0];bi.bv(bk[1],"click",this.Za.bh(this))};bc.dr=function(){this.dz="m-layer-tip"};bc.cB=function(bf){bf.parent=bf.parent||document.body;this.cC(bf);this.qQ.innerHTML=bf.mesg||""};bc.cL=function(){this.cR()};bc.Za=function(be){this.bN("onnotice");this.cs()};bo.lg=function(bf){if(this.tj){this.tj.bV();delete this.tj}this.tj=bo.nw.bG(bf);this.tj.bQ()}})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),bC=bd("nej.j"),bI=bd("nej.ut"),bm=bd("nej.u"),bn=bd("nm.x"),bq=bd("nm.d"),bT=bd("nm.w"),bc;bT.Zf=NEJ.C();bc=bT.Zf.bR(bI.ek);bc.dv=function(){this.dC()};bc.cB=function(bf){this.cC(bf);this.gS=bf.input;this.jm=bf.img;this.de([[bf.img,"click",this.Zm.bh(this)]]);this.Zm()};bc.cL=function(){this.cR()};bc.Yj=function(){this.Zm()};bc.tM=function(kJ,bBU){bC.cE("/api/image/captcha/verify",{type:"json",sync:!!bBU,method:"get",timeout:8e3,query:{id:this.bbg,captcha:this.gS.value},onload:this.GQ.bh(this,kJ)})};bc.Zm=function(){bC.cE("/api/image/captcha/get",{type:"json",method:"get",onload:this.bBS.bh(this)})};bc.bBS=function(be){if(be.code==200){this.bbg=be.captchaId;this.jm.src="/captcha?id="+be.captchaId}};bc.GQ=function(kJ,be){if(be.code==200&&be.result){this.bN("onverified",{ext:kJ,result:true,captchaId:this.bbg,captcha:this.gS.value})}else{this.bN("onverified",{ext:kJ,result:false});this.Yj()}}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bq=bd("nm.d"),bo=bd("nm.l"),bn=bd("nm.x"),bT=bd("nm.w"),bc,bP;bo.yr=NEJ.C();bc=bo.yr.bR(bo.fu);bP=bo.yr.dI;bc.cB=function(bf){this.cC(bf);this.ez=bf;this.dg=bT.Zf.bG({input:this.vs,img:this.bBQ,onverified:this.GQ.bh(this)})};bc.cL=function(){this.cR();if(this.dg){this.dg.bV();delete this.dg}};bc.dr=function(){this.dz="ntp-setnickname"};bc.df=function(){this.dn();this.fe=bb.bS(this.bs,"js-input")[0];bb.fM(this.fe,"holder");bi.bv(this.fe,"focus",this.fP.bh(this));bi.bv(this.fe,"keypress",this.BE.bh(this));bi.bv(this.fe,"keyup",this.Zq.bh(this));var bbt=bb.bS(this.bs,"js-vcode");this.vs=bbt[0];this.bBQ=bbt[1];bi.bv(this.vs,"focus",this.fP.bh(this));bi.bv(this.vs,"keypress",this.BE.bh(this));this.gb=bb.bS(this.bs,"u-err")[0];this.du=bb.bS(this.bs,"js-primary")[0];bi.bv(this.bs,"click",this.cO.bh(this))};bc.bQ=function(){bP.bQ.apply(this,arguments);this.cV(false);this.dp(false);this.fe.value="";this.vs.value=""};bc.fP=function(){bb.bM(this.fe,"u-txt-err");bb.bM(this.vs,"u-txt-err")};bc.BE=function(be){if(be.keyCode==13)this.yu()};bc.cO=function(be){var bE=bi.bZ(be,"d:action");if(!bE)return;var co=bb.bz(bE,"action");switch(co){case"ok":this.yu(be);break}};bc.yu=function(be){bi.dc(be);if(this.dp())return;if(!(this.sf=this.IH()))return;if(!this.vs.value.trim())return this.cV("请输入验证码","captcha");this.dg.tM()};bc.GQ=function(be){if(be.result){this.dp(true);this.cV(false);if(this.ez.onok){this.ez.onok({nickname:this.sf,captchaId:be.captchaId,captcha:be.captcha})}}else{this.cV("验证码错误","captcha")}};bc.IH=function(){var hP=this.fe.value.trim(),mO=hP.replace(/[^\x00-\xff]/g,"**");if(!hP)return this.cV("请输入昵称","nickname");if(mO.length<4||mO.length>30)return this.cV("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");if(!/^[\u4e00-\u9fa5A-Za-z0-9-_]*$/.test(hP))return this.cV("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");return hP};bc.Zq=function(be){var hP=this.fe.value.trim(),mO=hP.replace(/[^\x00-\xff]/g,"**");if(this.ZG==hP)return;this.ZG=hP;if(be.keyCode==13)return;if(/[^\u4e00-\u9fa5\w-]/.test(hP))return this.cV("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");if(hP&&mO.length>30)return this.cV("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");this.cV(false)};bc.BL=function(){if(!this.dg)return true;var dk=this.dg.tM();if(dk.success)return true;this.cV(dk.message,"captcha");return false};bc.cV=function(cU,hu){this.ef(this.gb,cU);bb.bM(this.fe,"u-txt-err");bb.bM(this.vs,"u-txt-err");if(hu=="nickname"){bb.bO(this.fe,"u-txt-err")}else if(hu=="captcha"){bb.bO(this.vs,"u-txt-err")}};bc.dp=function(dB){return this.ey(this.du,dB,"开启云音乐","设置中...")}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bq=bd("nm.d"),bo=bd("nm.l"),bn=bd("nm.x"),bc,bP;bo.oq=NEJ.C();bc=bo.oq.bR(bo.fu);bP=bo.oq.dI;bc.cB=function(bf){this.cC(bf);this.bK=bq.lb.bG();this.bK.bv("onsendcaptcha",this.tz.bh(this));this.bK.bv("onsendcaptchaerror",this.Hf.bh(this));this.bK.bv("onverifycaptcha",this.bBP.bh(this));this.bK.bv("onverifycaptchaerror",this.bBO.bh(this));if(this.fz)this.fz=clearInterval(this.fz)};bc.cL=function(){this.cR();this.bK.bV()};bc.dr=function(){this.dz="ntp-verifycaptcha"};bc.df=function(){this.dn();this.dw=bb.bS(this.bs,"js-tip")[0];var Hi=bb.bS(this.bs,"js-mobwrap");this.bbR=Hi[0];this.bbT=Hi[1];this.gw=bb.bS(this.bs,"js-mob")[0];this.bBN=bb.bS(this.bs,"js-lbl")[0];var gA=bb.bS(this.bs,"js-txt");this.pa=gA[0];this.vt=gA[1];bb.fM(this.pa,"holder");bb.fM(this.vt,"holder");bi.bv(this.pa,"focus",this.Hm.bh(this));bi.bv(this.pa,"keypress",this.Hn.bh(this));bi.bv(this.pa,"keyup",this.Ho.bh(this));bi.bv(this.vt,"focus",this.bBM.bh(this));bi.bv(this.vt,"keypress",this.bBK.bh(this));this.Iv=bb.bS(this.bs,"js-cd")[0];this.lY=bb.bS(this.bs,"js-send")[0];this.gb=bb.bS(this.bs,"u-err")[0];this.BV=bb.bS(this.bs,"js-next")[0];this.BW=bb.bS(this.bs,"js-btmbar")[0];this.ZM=bb.bS(this.bs,"js-back")[0];this.bcj=bb.bS(this.bs,"js-skip")[0];bi.bv(this.bs,"click",this.cO.bh(this))};bc.Hm=function(){bb.bM(this.pa,"u-txt-err")};bc.bBM=function(){bb.bM(this.vt,"u-txt-err")};bc.Hn=function(be){if(be.keyCode==0){if(be.charCode<48||be.charCode>57)bi.dc(be)}else if(be.charCode==0){if(be.keyCode==13)return this.sr()}else{if(be.keyCode==13)return this.sr();if(be.keyCode<48||be.keyCode>57)bi.dc(be)}};bc.Ho=function(be){if(/[^\d]/.test(this.pa.value))this.pa.value=this.pa.value.replace(/[^\d]/g,"")};bc.bBK=function(be){if(be.keyCode==13)this.sr()};bc.bQ=function(bf){bP.bQ.apply(this,arguments);this.ez=bf;this.cV(false);this.dp(false);if(bf.tip){this.dw.innerHTML=bf.tip;bb.bM(this.dw,"f-hide")}else{bb.bO(this.dw,"f-hide")}this.gl=bf.mobile||"";if(this.gl){this.gw.innerText=bn.Fr(this.gl)||"";bb.bO(this.bbT,"f-hide");bb.bM(this.bbR,"f-hide");this.It()}else{this.bBN.innerHTML=bf.mobileLabel||"手机号：";this.lY.innerHTML="<i>获取验证码</i>";bb.bO(this.bbR,"f-hide");bb.bM(this.bbT,"f-hide");bb.bO(this.Iv,"f-hide");bb.bM(this.lY,"f-hide")}this.pa.value="";this.vt.value="";bf.okbutton=bf.okbutton||"下一步";this.BV.innerHTML="<i>"+bf.okbutton+"</i>";bb.bO(this.BW,"f-hide");bb.bO(this.ZM,"f-hide");bb.bO(this.bcj,"f-hide");if(bf.backbutton){this.ZM.innerHTML=bf.backbutton||"";bb.bM(this.ZM,"f-hide");bb.bM(this.BW,"f-hide")}if(bf.canskip){bb.bM(this.bcj,"f-hide");bb.bM(this.BW,"f-hide")}};bc.cO=function(be){var bE=bi.bZ(be,"d:action");if(!bE)return;var co=bb.bz(bE,"action");switch(co){case"next":this.sr(be);break;case"send":this.bBH(be);break;case"back":this.ZO(be);break;case"skip":this.ZT(be);break}};bc.ZO=function(be){bi.dc(be);this.cs();if(this.ez.onback)return this.ez.onback()};bc.ZT=function(be){bi.dc(be);this.cs();if(this.ez.onskip)return this.ez.onskip()};bc.bBH=function(be){bi.dc(be);if(!!this.fz)return;var fg=this.Cd();if(!fg)return;this.bK.xG({data:{cellphone:fg}})};bc.tz=function(bp){this.It()};bc.Hf=function(bp){this.dp(false);this.cV("验证码发送失败")};bc.sr=function(be){bi.dc(be);if(this.dp())return;var jB=this.ow();if(!jB)return;this.dp(true);this.bK.bCI({data:{cellphone:jB.mobile,captcha:jB.captcha}})};bc.bBP=function(bp){if(this.ez.onok)this.ez.onok(bp)};bc.bBO=function(bp){this.dp(false);if(bp.code==503){this.cV("验证码错误","captcha")}else if(this.ez.onerror){this.ez.onerror(bp)}};bc.Cd=function(){var fg=this.gl||this.pa.value.trim();if(!fg)return this.cV("请输入手机号","mobile");if(!bn.tO(fg))return this.cV("请输入11位数字的手机号","mobile");return fg};bc.ow=function(){var fg=this.gl||this.pa.value.trim(),sw=this.vt.value.trim();if(!fg)return this.cV("请输入手机号","mobile");if(!sw)return this.cV("请输入验证码","captcha");if(!bn.tO(fg))return this.cV("请输入11位数字的手机号","mobile");this.cV(false);return{mobile:fg,captcha:sw}};bc.It=function(){var cK;var bcz=function(){cK--;this.Iv.innerText=" 00:"+(cK>=10?cK:"0"+cK)+" ";if(cK==0){this.fz=clearInterval(this.fz);this.lY.innerHTML="<i>重新发送</i>";bb.bO(this.Iv,"f-hide");bb.bM(this.lY,"f-hide")}};return function(){cK=60;this.fz=clearInterval(this.fz);this.fz=setInterval(bcz.bh(this),1e3);bcz.call(this);bb.bO(this.lY,"f-hide");bb.bM(this.Iv,"f-hide")}}();bc.cV=function(cU,hu){this.ef(this.gb,cU);bb.bM(this.pa,"u-txt-err");bb.bM(this.vt,"u-txt-err");if(hu=="mobile"){bb.bO(this.pa,"u-txt-err")}else if(hu=="captcha"){bb.bO(this.vt,"u-txt-err")}};bc.dp=function(dB){return this.ey(this.BV,dB,this.ez.okbutton,"验证中...")}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),gc=bd("nej.ut"),bn=bd("nm.x"),bq=bd("nm.d"),bo=bd("nm.l"),bc,bP;bo.yQ=NEJ.C();bc=bo.yQ.bR(gc.ek);bc.cB=function(bf){this.cC(bf);this.ez=bf;this.pf=bf.user;this.bK=bq.lb.bG();this.bK.bv("onmobilebind",this.ZX.bh(this));this.bK.bv("onmobilebinderror",this.bay.bh(this));this.bK.bv("onactive",this.HJ.bh(this));this.bK.bv("onactiveerror",this.baB.bh(this));if(bf.requiremobile&&!this.bBG(this.pf)){this.eT=bo.oq.bQ({title:"绑定手机号",onok:this.baD.bh(this),canskip:true,onskip:this.Ig.bh(this)})}else{this.Ig()}};bc.cL=function(){this.cR();this.bK.bV();if(this.eT)this.eT.bV();if(this.lz)this.lz.bV()};bc.baD=function(cl){this.gl=cl.mobile;this.Ie=cl.captcha;this.bK.XF({data:{phone:this.gl,captcha:this.Ie}})};bc.Ig=function(){if(this.lz)this.lz.bV();this.lz=bo.yr.bQ({title:"设置昵称",onok:this.bBF.bh(this)})};bc.ZX=function(){this.eT.cs();this.Ig()};bc.bay=function(cl){if(cl.code==506){this.eT.dp(false);this.eT.cV(cl.message,"mobile")}else{this.eT.cs();this.Ig()}};bc.bBF=function(cl){this.bK.XB({data:{nickname:cl.nickname,captchaId:cl.captchaId,captcha:cl.captcha}})};bc.HJ=function(cl){this.lz.cs();this.pf.profile=cl.profile;bi.bN(window,"login",{user:this.pf})};bc.baB=function(cl){this.lz.dp(false);if(cl.code==505)return this.lz.cV("该昵称已被占用","nickname");if(cl.code==407)return this.lz.cV("该昵称包含关键词","nickname");bo.cj.bQ({tip:cl.message||"登录失败，请重试",type:2});this.lz.cs()};bc.bBG=function(eF){var pY=eF.bindings||[];return bm.dS(pY,function(bw){return bw.type==1})>=0}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bn=bd("nm.x"),bq=bd("nm.d"),bo=bd("nm.l"),bc,bP;bo.HT=NEJ.C();bc=bo.HT.bR(bo.fu);bP=bo.HT.dI;bc.dr=function(){this.dz="ntp-reg-mobile"};bc.df=function(){this.dn();var gU=bb.bS(this.bs,"u-txt");this.gw=gU[0];this.eD=gU[1];bb.fM(this.gw,"holder");bb.fM(this.eD,"holder");bi.bv(this.gw,"focus",this.Hm.bh(this));bi.bv(this.gw,"keypress",this.Hn.bh(this));bi.bv(this.gw,"keyup",this.Ho.bh(this));bi.bv(this.eD,"focus",this.uj.bh(this));bi.bv(this.eD,"keypress",this.uk.bh(this));this.gb=bb.bS(this.bs,"u-err")[0];this.du=bb.bS(this.bs,"u-btn2")[0];bi.bv(this.bs,"click",this.cO.bh(this))};bc.Hm=function(){bb.bM(this.gw,"u-txt-err")};bc.uj=function(){bb.bM(this.eD,"u-txt-err")};bc.Hn=function(be){if(be.keyCode==0){if(be.charCode<48||be.charCode>57)bi.dc(be)}else if(be.charCode==0){if(be.keyCode==13)return this.Nd()}else{if(be.keyCode==13)return this.Nd();if(be.keyCode<48||be.keyCode>57)bi.dc(be)}};bc.Ho=function(be){if(/[^\d]/.test(this.gw.value))this.gw.value=this.gw.value.replace(/[^\d]/g,"")};bc.uk=function(be){if(be.keyCode==13)this.Nd()};bc.bQ=function(bf){bP.bQ.apply(this,arguments);this.ez=bf;this.cV(false);this.dp(false);this.gw.value=bf.mobile||"";this.eD.value=""};bc.cO=function(be){var bE=bi.bZ(be,"d:action");if(!bE)return;var co=bb.bz(bE,"action");switch(co){case"ok":this.Nd(be);break;case"back":this.ZO(be);break}};bc.ZO=function(be){bi.dc(be);this.cs();bo.mz.bQ({title:"登录"})};bc.Nd=function(be){bi.dc(be);var jB=this.ow();if(!jB)return;this.dp(true);if(this.ez.onok)this.ez.onok({mobile:jB.mobile,password:jB.password})};bc.ow=function(){var fg=this.gw.value.trim();var gg=this.eD.value;if(!fg)return this.cV("请输入手机号","mobile");if(!gg)return this.cV("请输入登录密码","password");if(!bn.tO(fg))return this.cV("请输入11位数字的手机号","mobile");if(gg.length<6||gg.length>16)return this.cV("请输入6-16位的密码","password");return{mobile:fg,password:gg}};bc.cV=function(cU,hu){this.ef(this.gb,cU);bb.bM(this.gw,"u-txt-err");bb.bM(this.eD,"u-txt-err");if(hu=="mobile"){bb.bO(this.gw,"u-txt-err")}else if(hu=="password"){bb.bO(this.eD,"u-txt-err")}};bc.dp=function(dB){return this.ey(this.du,dB,"下一步","发送中...")}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bq=bd("nm.d"),bo=bd("nm.l"),bT=bd("nm.w"),bc,bP;bo.Ib=NEJ.C();bc=bo.Ib.bR(bo.fu);bP=bo.Ib.dI;bc.cB=function(bf){this.cC(bf);this.bK=bq.lb.bG();this.bK.bv("onmobileregist",this.HZ.bh(this));this.bK.bv("onmobileregisterror",this.ig.bh(this))};bc.cL=function(){this.cR();this.bK.bV();if(this.dg){this.dg.bV();delete this.dg}};bc.dr=function(){this.dz="ntp-reg-setting"};bc.df=function(){this.dn();this.dw=bb.bS(this.bs,"js-tip")[0];this.ho=bb.bS(this.bs,"js-input")[0];bb.fM(this.ho,"holder");bi.bv(this.ho,"focus",this.bBE.bh(this));bi.bv(this.ho,"keypress",this.bBD.bh(this));bi.bv(this.ho,"keyup",this.Zq.bh(this));this.gb=bb.bS(this.bs,"u-err")[0];this.du=bb.bS(this.bs,"js-primary")[0];bi.bv(this.bs,"click",this.cO.bh(this))};bc.bQ=function(bf){bP.bQ.apply(this,arguments);this.gl=bf.mobile||"";this.oI=bf.password||"";this.bBA=bf.captcha||"";if(bf.tip){this.dw.innerHTML=bf.tip}this.cV(false);this.dp(false);this.ho.value=""};bc.cO=function(be){var bE=bi.bZ(be,"d:action");if(!bE)return;var co=bb.bz(bE,"action");switch(co){case"ok":this.HN(be);break}};bc.bBE=function(){bb.bM(this.ho,"u-txt-err")};bc.bBD=function(be){if(be.keyCode==13)this.HN()};bc.HN=function(be){bi.dc(be);if(this.dp())return;var jB=this.ow();if(!jB)return;var bl={phone:this.gl,password:bm.kk(this.oI),nickname:jB.nickname,captcha:this.bBA};this.dp(true);this.bK.JI({data:bl})};bc.HZ=function(bp){this.dp(false);this.cs();localCache.qp("user",bp);bi.bN(window,"login",{user:bp})};bc.ig=function(cl){this.dp(false);if(cl.code==415){if(this.dg){this.dg.bV();this.cV("验证码错误","captcha")}this.dg=bT.AL.bG({captchaId:cl.captchaId,txt:"txt-login-captcha",onaction:this.HN.bh(this)});this.gb.insertAdjacentElement("beforeBegin",this.dg.la());return}if(cl.code==505)return this.cV("该昵称已被占用","nickname");if(cl.code==407)return this.cV("该昵称包含关键词","nickname");if(cl.message){this.cV(cl.message)}else{bo.cj.bQ({tip:"注册失败，请重试",type:2})}};bc.ow=function(){var hP=this.ho.value.trim(),mO=hP.replace(/[^\x00-\xff]/g,"**"),sw="";if(!hP)return this.cV("请输入昵称","nickname");if(this.dg){sw=this.dg.fA();if(!sw)return this.cV("请输入验证码","captcha")}if(mO.length<4||mO.length>30)return this.cV("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");if(!/^[\u4e00-\u9fa5A-Za-z0-9-_]*$/.test(hP))return this.cV("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");return{nickname:hP,captcha:sw}};bc.Zq=function(be){var hP=this.ho.value.trim(),mO=hP.replace(/[^\x00-\xff]/g,"**");if(this.ZG==hP)return;this.ZG=hP;if(be.keyCode==13)return;if(/[^\u4e00-\u9fa5\w-]/.test(hP))return this.cV("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");if(hP&&mO.length>30)return this.cV("昵称应该是4-30个字，且不包含除-和_以外的特殊字符","nickname");this.cV(false)};bc.cV=function(cU,hu){this.ef(this.gb,cU);bb.bM(this.ho,"u-txt-err");if(this.dg)this.dg.bM("u-txt-err");if(hu=="nickname"){bb.bO(this.ho,"u-txt-err")}else if(hu=="captcha"){if(this.dg)this.dg.bO("u-txt-err")}};bc.dp=function(dB){return this.ey(this.du,dB,"开启云音乐","设置中...")}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),gc=bd("nej.ut"),bn=bd("nm.x"),bq=bd("nm.d"),bo=bd("nm.l"),bc,bP;var MOB_CHECK={MAIN:1,SNS:2,NETEASE:3,NULL:-1};bo.Ih=NEJ.C();bc=bo.Ih.bR(gc.ek);bc.cB=function(bf){bf=bf||{};this.cC(bf);this.bK=bq.lb.bG();this.bK.bv("onsendcaptcha",this.tz.bh(this));this.bK.bv("onsendcaptchaerror",this.baE.bh(this));this.bK.bv("onmobilecheck",this.HM.bh(this));this.bK.bv("onmobilecheckerror",this.HK.bh(this));this.bK.bv("onmobileregist",this.HZ.bh(this));this.bK.bv("onmobileregisterror",this.Il.bh(this));this.ue=bo.HT.bQ({title:"手机号注册",onok:this.bas.bh(this)})};bc.cL=function(){this.cR();this.bK.bV();if(this.ue)this.ue.bV();if(this.eT)this.eT.bV()};bc.bas=function(cl){this.gl=cl.mobile;this.oI=cl.password;this.bK.xG({data:{cellphone:cl.mobile}})};bc.tz=function(){this.ue.cs();this.eT=bo.oq.bQ({title:"手机号注册",mobile:this.gl,okbutton:"下一步",onok:this.ban.bh(this),backbutton:"&lt;&nbsp;&nbsp;返回登录",onback:this.baj.bh(this)})};bc.baE=function(cl){this.ue.dp(false);bo.cj.bQ({tip:cl.message||"验证码发送失败",type:2})};bc.ban=function(cl){this.gl=cl.mobile;this.dg=cl.captcha;this.bK.Xx({data:{cellphone:cl.mobile,captcha:cl.captcha}})};bc.HM=function(cl){this.eT.cs();switch(cl.exist){case MOB_CHECK.NULL:bo.Ib.bQ({title:"手机号注册",mobile:this.gl,password:this.oI,captcha:this.dg});break;case MOB_CHECK.MAIN:case MOB_CHECK.SNS:case MOB_CHECK.NETEASE:this.bdH(this.gl,this.oI,this.dg);break}};bc.HK=function(cl){bo.cj.bQ({tip:cl.message||"验证码发送失败",type:2})};bc.HZ=function(cl){localCache.qp("user",cl);if(!cl.profile){if(this.ly)this.ly.bV();this.ly=bo.yQ.bG({user:cl,requiremobile:false,onsuccess:this.tQ.bh(this)})}else{bn.fJ({clazz:"m-layer-w2",title:"手机号注册",message:'该手机号已与云音乐帐号 <strong class="s-fc1">'+bm.eO(cl.profile.nickname)+"</strong> 绑定，<br/><br/>以后你可以直接用该手机号+密码登录",btntxt:"知道了",action:bi.bN.bh(bi,window,"login",{user:cl}),onclose:bi.bN.bh(bi,window,"login",{user:cl})})}};bc.tQ=function(be){bi.bN(window,"login",{user:be.user})};bc.Il=function(cl){if(cl.code==415){bn.boQ({captchaId:cl.captchaId,ondestroy:this.bdH.bh(this,this.gl,this.oI,this.dg)})}else{bo.cj.bQ({tip:cl.message||"注册失败，请重试",type:2})}};bc.baj=function(){this.eT.cs();bo.mz.bQ({title:"登录"})};bc.bdH=function(fg,gg,sw){this.bK.JI({data:{phone:fg,password:bm.kk(gg),captcha:sw}})}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),gc=bd("nej.ut"),bn=bd("nm.x"),bq=bd("nm.d"),bo=bd("nm.l"),bc,bP;var MOB_CHECK={MAIN:1,SNS:2,NETEASE:3,NULL:-1};bo.bdO=NEJ.C();bc=bo.bdO.bR(gc.ek);bc.cB=function(bf){bf=bf||{};this.cC(bf);this.bK=bq.lb.bG();this.bK.bv("onsendcaptcha",this.tz.bh(this));this.bK.bv("onsendcaptchaerror",this.baE.bh(this));this.bK.bv("onmobilecheck",this.HM.bh(this));this.bK.bv("onmobilecheckerror",this.HK.bh(this));this.bK.bv("onmobileregist",this.HZ.bh(this));this.bK.bv("onmobileregisterror",this.Il.bh(this));this.ue=bo.HT.bQ({title:"重设密码",mobile:bf.mobile||"",onok:this.bas.bh(this)})};bc.cL=function(){this.cR();this.bK.bV();if(this.ue)this.ue.bV();if(this.eT)this.eT.bV()};bc.bas=function(cl){this.gl=cl.mobile;this.oI=cl.password;this.bK.xG({data:{cellphone:cl.mobile}})};bc.tz=function(){this.ue.cs();this.eT=bo.oq.bQ({title:"重设密码",mobile:this.gl,okbutton:"下一步",onok:this.ban.bh(this),backbutton:"&lt;&nbsp;&nbsp;返回登录",onback:this.baj.bh(this),onerror:this.Il.bh(this)})};bc.baE=function(cl){this.ue.dp(false);bo.cj.bQ({tip:cl.message||"验证码发送失败",type:2})};bc.ban=function(cl){this.gl=cl.mobile;this.dg=cl.captcha;this.bK.Xx({data:{cellphone:cl.mobile,captcha:cl.captcha}})};bc.HM=function(cl){this.eT.cs();switch(cl.exist){case MOB_CHECK.NULL:bo.Ib.bQ({title:"设置昵称",tip:"该手机号尚未注册，取一个昵称，马上开通",mobile:this.gl,password:this.oI,captcha:this.dg});break;case MOB_CHECK.MAIN:case MOB_CHECK.SNS:case MOB_CHECK.NETEASE:this.bK.JI({data:{phone:this.gl,password:bm.kk(this.oI),captcha:this.dg}});break}};bc.HK=function(cl){bo.cj.bQ({tip:cl.message||"验证码发送失败",type:2})};bc.baj=function(){this.eT.cs();bo.mz.bQ({title:"登录"})};bc.HZ=function(bp){localCache.qp("user",bp);if(!bp.profile){if(this.ly)this.ly.bV();this.ly=bo.yQ.bG({user:bp,requiremobile:false,onsuccess:this.tQ.bh(this)})}else{bi.bN(window,"login",{user:bp})}};bc.tQ=function(be){bi.bN(window,"login",{user:be.user})};bc.Il=function(bp){if(bp.code==415){bn.boQ({captchaId:bp.captchaId,ondestroy:function(){this.bK.JI({data:{phone:this.gl,password:bm.kk(this.oI),captcha:this.dg}})}.bh(this)})}else{bo.cj.bQ({tip:"重设密码失败，请重试",type:2})}}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bn=bd("nm.x"),bq=bd("nm.d"),bo=bd("nm.l"),bT=bd("nm.w"),bc,bP;bo.yL=NEJ.C();bc=bo.yL.bR(bo.fu);bP=bo.yL.dI;bc.cB=function(bf){this.cC(bf);this.bK=bq.lb.bG();this.bK.bv("onmobilelogin",this.yK.bh(this));this.bK.bv("onmobileloginerror",this.ig.bh(this))};bc.cL=function(){this.cR();this.bK.bV();if(this.dg){this.dg.bV();delete this.dg}if(this.sp)this.sp.bV()};bc.dr=function(){this.dz="ntp-login-mobile"};bc.df=function(){this.dn();var gA=bb.bS(this.bs,"js-input");this.gw=gA[0];this.eD=gA[1];bb.fM(this.gw,"holder");bb.fM(this.eD,"holder");bi.bv(this.gw,"focus",this.Hm.bh(this));bi.bv(this.gw,"keypress",this.Hn.bh(this));bi.bv(this.gw,"keyup",this.Ho.bh(this));bi.bv(this.eD,"focus",this.uj.bh(this));bi.bv(this.eD,"keypress",this.uk.bh(this));this.gb=bb.bS(this.bs,"u-err")[0];this.Hq=bb.bS(this.bs,"u-auto")[0];this.du=bb.bS(this.bs,"js-primary")[0];bi.bv(this.bs,"click",this.cO.bh(this))};bc.bQ=function(){bP.bQ.apply(this,arguments);this.cV(false);this.dp(false);this.gw.value="";this.eD.value="";this.Hq.checked=true};bc.Hm=function(){bb.bM(this.gw,"u-txt-err")};bc.uj=function(){bb.bM(this.eD,"u-txt-err")};bc.Hn=function(be){if(be.keyCode==0){if(be.charCode<48||be.charCode>57)bi.dc(be)}else if(be.charCode==0){if(be.keyCode==13)return this.iA()}else{if(be.keyCode==13)return this.iA();if(be.keyCode<48||be.keyCode>57)bi.dc(be)}};bc.Ho=function(be){if(/[^\d]/.test(this.gw.value))this.gw.value=this.gw.value.replace(/[^\d]/g,"")};bc.uk=function(be){if(be.keyCode==13)this.iA()};bc.cO=function(be){var bE=bi.bZ(be,"d:action");if(!bE)return;var co=bb.bz(bE,"action");switch(co){case"login":this.iA(be);break;case"forget":bi.cr(be);this.cs();bo.bdO.bG({mobile:this.gw.value});break;case"select":this.ZK(be);break;case"reg":this.bBz(be);break}};bc.iA=function(be){bi.dc(be);if(this.dp())return;var jB=this.ow();if(!jB)return;if(!this.BL())return;if(this.dg){this.dg.bV();delete this.dg}var bl={phone:jB.mobile,password:bm.kk(jB.password),rememberLogin:this.Hq.checked};this.dp(true);this.cV(false);this.bK.bCG({data:bl})};bc.yK=function(bp){this.dp(false);this.cs();localCache.qp("user",bp);if(!bp.profile){if(this.ly)this.ly.bV();this.ly=bo.yQ.bG({user:bp,requiremobile:false,onsuccess:this.tQ.bh(this)})}else{bi.bN(window,"login",{user:bp})}};bc.tQ=function(be){bi.bN(window,"login",{user:be.user})};bc.ig=function(cl){this.dp(false);if(cl.code==415){if(this.dg)this.dg.bV();this.dg=bT.AL.bG({captchaId:cl.captchaId,txt:"txt-login-captcha",onaction:this.iA.bh(this)});this.gb.insertAdjacentElement("beforeBegin",this.dg.la());return}if(cl.code==501){this.cV("该手机号尚未注册","mobile");return}if(cl.code==10002||cl.code==502||cl.code==501){this.cV("手机号或密码错误");return}if(cl.message){this.cV(cl.message)}else{bo.cj.bQ({tip:"登录失败，请重试",type:2})}};bc.ZK=function(be){bi.cr(be);bo.mz.bQ({title:"登录"})};bc.bBz=function(be){bi.cr(be);this.cs();if(this.sp)this.sp.bV();this.sp=bo.Ih.bG()};bc.ow=function(){var fg=this.gw.value.trim();var gg=this.eD.value;if(!fg)return this.cV("请输入手机号","mobile");if(!gg)return this.cV("请输入登录密码","password");if(!bn.tO(fg))return this.cV("请输入11位数字的手机号","mobile");return{mobile:fg,password:gg}};bc.BL=function(){if(!this.dg)return true;var dk=this.dg.tM();if(dk.success)return true;this.cV(dk.message,"captcha");return false};bc.cV=function(cU,hu){this.ef(this.gb,cU);bb.bM(this.gw,"u-txt-err");bb.bM(this.eD,"u-txt-err");if(this.dg)this.dg.bM("u-txt-err");if(hu=="mobile"){bb.bO(this.gw,"u-txt-err")}else if(hu=="password"){bb.bO(this.eD,"u-txt-err")}else if(hu=="captcha"){if(this.dg)this.dg.bO("u-txt-err")}};bc.dp=function(dB){return this.ey(this.du,dB,"登　录","登录中...")}})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),dW=bd("nej.p"),bF=bd("nej.ut"),nc,bBy;if(!!bF.yz)return;bF.yz=NEJ.C();nc=bF.yz.bR(bF.ek);bBy=bF.yz.dI;nc.cB=function(bf){this.cC(bf);this.bs=bb.bD(bf.body);this.eK=bb.bD(bf.input);this.ji=bf.selected||"js-selected";this.dx=0;this.de([[this.eK,"input",this.jL.bh(this)],[this.eK,"blur",this.ZF.bh(this,"blur")],[this.bs,"mouseover",this.wv.bh(this)],[this.bs,"click",this.jN.bh(this)],[document,"keydown",this.bBx.bh(this)],[document,"keypress",this.ZA.bh(this)]]);if(dW.dU.release=="5.0"){this.de([[this.eK,"keydown",this.bed.bh(this)],[this.eK,"keyup",this.bed.bh(this)]])}};nc.cL=function(){this.cR();this.bee();delete this.ji;delete this.eK;delete this.bs;delete this.bef;delete this.Zx};nc.bBw=function(bE){return bE.flag!=null};nc.bee=function(){var bBv=function(bj){bm.Jz(bj,"flag")};return function(){bm.cz(this.ds,bBv);delete this.ds;delete this.dx}}();nc.Zu=function(bt){if(this.dx===bt)return;this.dx=bt;bb.bO(this.ds[this.dx],this.ji)};nc.bem=function(bt){if(this.dx!==bt)return;bb.bM(this.ds[this.dx],this.ji);delete this.dx};nc.ZF=function(bu){this.Zr=setTimeout(function(){if(!this.ds)return;var bw=this.ds[this.dx]||this.ds[0],bB=bb.bz(bw,"value")||bw.innerText;this.eK.value=bB;this.oy();this.Zx=!0;this.bN("onselect",bB,{type:bu});this.Zx=!1}.bh(this),bu=="blur"?200:0)};nc.jL=function(){var bB=this.eK.value.trim();if(!bB){this.oy()}else{if(this.Zx)return;this.bN("onchange",bB)}};nc.wv=function(be){var bE=bi.bZ(be,this.bBw);if(!!bE){this.bem(this.dx);this.Zu(bE.flag)}};nc.jN=function(){if(this.Zr){this.Zr=clearTimeout(this.Zr)}this.ZF("click")};nc.bBx=function(be){var eZ=0,dX=be.keyCode;if(dX==38)eZ=-1;if(dX==40)eZ=1;if(!eZ)return;bi.cr(be);var bt=Math.max(0,Math.min(this.dx+eZ,this.ds.length-1));if(bt===this.dx)return;this.bem(this.dx);this.Zu(bt)};nc.ZA=function(be){var bu="enter";if(be.keyCode==13)this.ZF(bu)};nc.bed=function(be){if(be.type=="keydown"){this.bef=this.eK.value}else if(this.bef!=this.eK.value&&!!this.ds){this.jL()}};nc.oy=function(){var bBs=function(bj,bt){bj.flag=bt};return function(bk){this.bee();if(!bk||!bk.length){this.bs.style.visibility="hidden";return this}this.ds=bk;var bt=bm.dS(this.ds,function(bj){return bb.cW(bj,this.ji)});this.Zu(Math.max(0,bt));bm.cz(this.ds,bBs);this.bs.style.visibility="visible";return this}}()})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bI=bd("nej.ut"),bn=bd("nm.x"),bq=bd("nm.d"),bT=bd("nm.w"),bo=bd("nm.l"),bc,bP;bo.yq=NEJ.C();bc=bo.yq.bR(bo.fu);bP=bo.yq.dI;bc.cB=function(bf){this.cC(bf);this.bK=bq.lb.bG();this.bK.bv("onlogin",this.yK.bh(this));this.bK.bv("onloginerror",this.ig.bh(this))};bc.cL=function(){this.cR();if(this.dg){this.dg.bV();delete this.dg}};bc.dr=function(){this.dz="ntp-login-netease"};bc.df=function(){this.dn();var gA=bb.bS(this.bs,"js-input");this.ho=gA[0];this.eD=gA[1];bb.fM(this.ho,"holder");bb.fM(this.eD,"holder");bi.bv(this.ho,"focus",this.Zj.bh(this));bi.bv(this.eD,"focus",this.uj.bh(this));bi.bv(this.eD,"keypress",this.uk.bh(this));this.ru=bb.bS(this.bs,"js-suggest")[0];this.qu=bI.yz.bG({body:this.ru,input:this.ho,onchange:this.yj.bh(this),onselect:this.yi.bh(this)});this.gb=bb.bS(this.bs,"u-err")[0];this.Hq=bb.bS(this.bs,"u-auto")[0];this.du=bb.bS(this.bs,"js-primary")[0];bi.bv(this.bs,"click",this.cO.bh(this))};bc.bQ=function(){bP.bQ.apply(this,arguments);this.cV(false);this.dp(false);this.ho.value="";this.eD.value="";this.Hq.checked=true};bc.Zj=function(){bb.bM(this.ho,"u-txt-err")};bc.uj=function(){bb.bM(this.eD,"u-txt-err")};bc.uk=function(be){if(be.keyCode==13)this.iA()};bc.cO=function(be){var bE=bi.bZ(be,"d:action");if(!bE)return;var co=bb.bz(bE,"action");switch(co){case"login":this.iA(be);break;case"suggest":this.YZ(be);break;case"select":this.ZK(be);break}};bc.YZ=function(be){var bj=bi.bZ(be);if(bj.href){bi.dc(be)}};bc.yj=function(bB){if(!bB)return this.qu.oy([]);var jq=["163.com","126.com","yeah.net","vip.163.com","vip.126.com","188.com"];var iq=bB.indexOf("@"),i,hR;if(iq<0){for(i=0,hR=[];i<jq.length;++i){hR.push(bB+"@"+jq[i])}}else{var oS=bB.substring(iq+1),cA=oS.length;for(i=0,hR=[];i<jq.length;++i){if(jq[i].substr(0,cA)==oS){hR.push(bB.substring(0,iq)+"@"+jq[i])}}}this.ru.innerHTML=bb.dh("jst-login-suggest",{suggests:hR},{escape:bm.eO});this.qu.oy(bb.dT(this.ru))};bc.yi=function(bB){this.ho.value=bB;this.eD.focus()};bc.iA=function(be){bi.dc(be);if(this.dp())return;var jB=this.ow();if(!jB)return;if(!this.BL())return;if(this.dg){this.dg.bV();delete this.dg}var bl={username:jB.username,password:bm.kk(jB.password),rememberLogin:this.Hq.checked};this.dp(true);this.cV(false);this.bK.bnW({data:bl})};bc.yK=function(bp){this.dp(false);this.cs();localCache.qp("user",bp);if(!bp.profile){if(this.ly)this.ly.bV();this.ly=bo.yQ.bG({user:bp,requiremobile:false,onsuccess:this.tQ.bh(this)})}else{bi.bN(window,"login",{user:bp})}};bc.tQ=function(be){bi.bN(window,"login",{user:be.user})};bc.ig=function(cl){this.dp(false);if(cl.code==415){if(this.dg)this.dg.bV();this.dg=bT.AL.bG({captchaId:cl.captchaId,txt:"txt-login-captcha",onaction:this.iA.bh(this)});this.gb.insertAdjacentElement("beforeBegin",this.dg.la());return}if(cl.code==10002||cl.code==502||cl.code==501){this.cV("帐号或密码错误");return}if(cl.message){this.cV(cl.message)}else{bo.cj.bQ({tip:"登录失败，请重试",type:2})}};bc.ZK=function(be){bi.cr(be);bo.mz.bQ({title:"登录"})};bc.ow=function(){var kB=this.ho.value.trim(),gg=this.eD.value;if(!kB){this.cV("请输入邮箱帐号","username");return null}if(!gg){this.cV("请输入登录密码","password");return null}this.cV(false);return{username:kB,password:gg}};bc.cV=function(cU,hu){this.ef(this.gb,cU);bb.bM(this.ho,"u-txt-err");bb.bM(this.eD,"u-txt-err");if(this.dg)this.dg.bM("u-txt-err");if(hu=="username"){bb.bO(this.ho,"u-txt-err")}else if(hu=="password"){bb.bO(this.eD,"u-txt-err")}else if(hu=="captcha"){if(this.dg)this.dg.bO("u-txt-err")}};bc.dp=function(dB){return this.ey(this.du,dB,"登　录","登录中...")};bc.BL=function(){if(!this.dg)return true;var dk=this.dg.tM();if(dk.success)return true;this.cV(dk.message,"captcha");return false}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bq=bd("nm.d"),bo=bd("nm.l"),bc,bP;bo.mz=NEJ.C();bc=bo.mz.bR(bo.fu);bc.dr=function(){this.dz="ntp-login-nav"};bc.df=function(){this.dn();bi.bv(this.bs,"click",this.cO.bh(this))};bc.cO=function(be){var bE=bi.bZ(be,"d:action");if(!bE)return;var co=bb.bz(bE,"action"),bu=bb.bz(bE,"type");this.cs();switch(co){case"login":if(bu=="mobile"){bi.cr(be);bo.yL.bQ({title:"手机号登录"})}else if(bu=="netease"){bo.yq.bQ({title:"邮箱登录"})}break;case"reg":bi.cr(be);if(this.sp)this.sp.bV();this.sp=bo.Ih.bG();break}};bo.mz.bQ=bo.mz.bQ.eA(function(be){bo.yL.cs();bo.yq.cs()})})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bq=bd("nm.d"),bo=bd("nm.l"),bn=bd("nm.x"),bc,bP;bo.Bo=NEJ.C();bc=bo.Bo.bR(bo.fu);bP=bo.Bo.dI;bc.dr=function(){this.dz="ntp-setpassword"};bc.df=function(){this.dn();var YO=bb.bS(this.bs,"js-tip");this.dw=YO[0];this.beE=YO[1];this.beF=YO[2];this.gw=bb.bS(this.bs,"js-mob")[0];this.eD=bb.bS(this.bs,"js-input")[0];bb.fM(this.eD,"holder");bi.bv(this.eD,"focus",this.fP.bh(this));bi.bv(this.eD,"keypress",this.BE.bh(this));this.gb=bb.bS(this.bs,"u-err")[0];this.du=bb.bS(this.bs,"js-primary")[0];this.BW=bb.bS(this.bs,"js-btmbar")[0];bi.bv(this.bs,"click",this.cO.bh(this))};bc.cB=function(bf){this.cC(bf);this.ez=bf;this.cV(false);this.dp(false);if(bf.tip){this.dw.innerHTML=bf.tip;bb.bM(this.dw,"f-hide")}else{bb.bO(this.dw,"f-hide")}if(bf.mobile){this.gw.innerHTML=bn.Fr(bf.mobile)||"";bb.bO(this.beF,"f-hide");bb.bM(this.beE,"f-hide")}else{bb.bO(this.beE,"f-hide");bb.bM(this.beF,"f-hide")}this.eD.value="";bf.okbutton=bf.okbutton||"下一步";this.du.innerHTML="<i>"+bf.okbutton+"</i>";if(bf.canskip){bb.bM(this.BW,"f-hide")}else{bb.bO(this.BW,"f-hide")}};bc.cO=function(be){var bE=bi.bZ(be,"d:action");if(!bE)return;var co=bb.bz(bE,"action");switch(co){case"ok":this.yu(be);break;case"skip":this.ZT(be);break}};bc.fP=function(){bb.bM(this.eD,"u-txt-err")};bc.BE=function(be){if(be.keyCode==13)this.yu()};bc.ZT=function(be){bi.dc(be);this.cs();if(this.ez.onskip)this.ez.onskip()};bc.yu=function(be){bi.dc(be);if(this.dp())return;var gg;if(!(gg=this.YN()))return;this.dp(true);if(this.ez.onok)this.ez.onok({password:gg,mobile:this.ez.mobile})};bc.YN=function(){var gg=this.eD.value;if(!gg)return this.cV("请输入密码","password");if(gg.length<6||gg.length>16)return this.cV("请输入6-16位的密码","password");if(/[^\x00-\xff]/.test(gg))return this.cV("密码不支持中文字符","password");return gg};bc.cV=function(cU,hu){this.ef(this.gb,cU);bb.bM(this.eD,"u-txt-err");if(hu=="password"){bb.bO(this.eD,"u-txt-err")}};bc.dp=function(dB){return this.ey(this.du,dB,this.ez.okbutton,"设置中...")}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),gc=bd("nej.ut"),bn=bd("nm.x"),bq=bd("nm.d"),bo=bd("nm.l"),bc,bP;bo.beH=NEJ.C();bc=bo.beH.bR(gc.ek);var MOB_CHECK={MAIN:1,SNS:2,NETEASE:3,NULL:-1};var ACCOUNT_TYPE={MOBILE:1,TWEIBO:6};var LOGIN_ACCOUNT=[{type:1,title:"手机",key:"cellphone"},{type:0,title:"网易邮箱帐号",key:"email"},{type:2,title:"新浪微博",key:"name"},{type:10,title:"微信",key:"nickname"},{type:5,title:"QQ",key:"nickname"}];bc.cB=function(bf){this.cC(bf);this.ez=bf;this.pf=bf.user;this.bK=bq.lb.bG();this.bK.bv("onmobilecheck",this.HM.bh(this));this.bK.bv("onmobilecheckerror",this.HK.bh(this));this.bK.bv("onmobilebind",this.Bl.bh(this));this.bK.bv("onmobilebinderror",this.Bf.bh(this));this.bK.bv("onmobileupdatepwd",this.Bl.bh(this));this.bK.bv("onmobileupdatepwderror",this.Bf.bh(this));this.bK.bv("onactive",this.HJ.bh(this));this.bK.bv("onactiveerror",this.baB.bh(this));var IY=this.bBr(this.pf);this.beU=IY;this.beV=this.bBq(this.pf);if(bf.user.account.type==ACCOUNT_TYPE.MOBILE||bf.user.account.type==ACCOUNT_TYPE.TWEIBO){if(!IY){this.bBp()}else{if(IY.hasPassword){this.bfb()}else{this.bfd({tip:'云音乐将不再支持 <strong class="s-fc1">腾讯微博</strong> 登录方式，<br/>设置登录密码，以后可以使用手机号登录',mobile:IY.uid})}}}else{this.bfb()}};bc.cL=function(){this.cR();this.bK.bV();if(this.eT)this.eT.bV();if(this.lz)this.lz.bV();if(this.kD)this.kD.bV()};bc.bfb=function(){var cu={0:"邮箱帐号",1:"手机号",2:"新浪微博",5:"QQ",10:"微信"},eF=this.pf,Jd=this.beV.type==ACCOUNT_TYPE.TWEIBO?this.beU:this.beV;if(!eF.profile){if(this.ly)this.ly.bV();this.ly=bo.yQ.bG({user:eF,requiremobile:false,onsuccess:this.tQ.bh(this)})}else{bn.hN({title:"提示",message:"云音乐即将不支持腾讯微博登录<br/>建议你后续使用以下绑定的"+(cu[Jd.type]||"帐号")+"登录<br/><strong>"+(Jd.type==ACCOUNT_TYPE.MOBILE?bn.Fr(Jd.uid):bm.eO(Jd.uid))+"</strong>",btnok:"查看详情",btncc:"知道了",okstyle:"u-btn2-w1",ccstyle:"u-btn2-w1",action:function(bu){if(bu=="ok"){location.hash="/user/binding/#/list"}else{bi.bN(window,"login",{user:eF})}},onclose:bi.bN.bh(bi,window,"login",{user:eF})})}};bc.tQ=function(be){bi.bN(window,"login",{user:be.user})};bc.bBp=function(){this.eT=bo.oq.bQ({title:"绑定手机号",tip:'云音乐将不再支持 <strong class="s-fc1">腾讯微博</strong> 登录方式，<br/>请绑定手机号，以免后续无法使用该帐号',onok:this.bBo.bh(this)})};bc.bBo=function(cl){this.gl=cl.mobile;this.Ie=cl.captcha;this.bK.Xx({data:{cellphone:cl.mobile,captcha:cl.captcha}})};bc.HM=function(cl){if(cl.nickname){this.eT.dp(false);this.eT.cV("绑定失败，该手机号已与云音乐帐号 "+bm.eO(cl.nickname)+" 绑定","mobile")}else{this.bfd()}};bc.HK=function(){this.eT.cs();bo.cj.bQ({tip:"登录失败，请重试",type:2})};bc.bfd=function(cQ){if(this.eT)this.eT.cs();cQ=cQ||{};this.kD=bo.Bo.bQ({title:"设置密码",tip:cQ.tip,mobile:cQ.mobile,onok:this.bBn.bh(this)})};bc.bBn=function(cl){if(this.beU){this.bK.JH({data:{phone:this.gl,password:bm.kk(cl.password),captcha:this.Ie}})}else{this.bK.XF({data:{phone:this.gl,captcha:this.Ie,password:bm.kk(cl.password)}})}};bc.Bl=function(cl){this.kD.cs();if(this.pf.profile||this.pf.account.type==ACCOUNT_TYPE.MOBILE){bi.bN(window,"login",{user:this.pf})}else if(this.pf.account.type==ACCOUNT_TYPE.TWEIBO){this.lz=bo.yr.bQ({title:"设置昵称",onok:this.bBm.bh(this)})}};bc.Bf=function(cl){this.kD.cs();bo.cj.bQ({tip:cl.message||"登录失败，请重试",type:2})};bc.bBm=function(cl){this.bK.XB({data:{nickname:cl.nickname,captchaId:cl.captchaId,captcha:cl.captcha}})};bc.HJ=function(cl){this.lz.cs();this.pf.profile=cl.profile;bi.bN(window,"login",{user:this.pf})};bc.baB=function(cl){this.lz.dp(false);if(cl.code==505)return this.lz.cV("该昵称已被占用","nickname");if(cl.code==407)return this.lz.cV("该昵称包含关键词","nickname");this.lz.cs();bo.cj.bQ({tip:cl.message||"登录失败，请重试",type:2})};bc.bBr=function(eF){var pY=eF.bindings||[];var bt=bm.dS(pY,function(bw){return bw.type==ACCOUNT_TYPE.MOBILE});var lI=bt>=0?pY[bt]:null;if(!lI)return null;var jd=JSON.parse(lI.tokenJsonStr);lI.uid=jd.cellphone;lI.hasPassword=jd.hasPassword;return lI};bc.bBq=function(eF){var pY=eF.bindings||[];var bt=bm.dS(pY,function(bw){return bw.type==eF.account.type});var lI=bt>=0?pY[bt]:null;if(!lI)return null;var jd=JSON.parse(lI.tokenJsonStr);lI.uid=jd.cellphone||jd.email||jd.name||jd.nickname||"";return lI}})();
(function(){var bd=NEJ.P,bI=bd("nej.ut"),bi=bd("nej.v"),bC=bd("nej.j"),bb=bd("nej.e"),bm=bd("nej.u"),bJ=bd("nm.m"),bq=bd("nm.d"),bo=bd("nm.l"),bc,bP;bJ.Ys=NEJ.C();bc=bJ.Ys.bR(bI.ek);var LOGIN_ACCOUNT=[{type:1,title:"手机",icon:"mb",key:"cellphone",uidkey:"cellphone"},{type:10,title:"微信",icon:"wx",key:"nickname",uidkey:"unionid"},{type:5,title:"QQ",icon:"qq",key:"nickname",uidkey:"openid"},{type:2,title:"新浪微博",icon:"sn",key:"name",uidkey:"uid"},{type:0,title:"网易邮箱帐号",icon:"urs",key:"email",uidkey:"email"}];var SHARE_ACCOUNT=[{type:4,title:"人人",icon:"rr",key:"user.name",uidkey:"user.id"},{type:3,title:"豆瓣",icon:"db",key:"douban_user_name",uidkey:"douban_user_id"}];var TWEIBO={type:6,title:"腾讯微博",icon:"tc",key:"nick",uidkey:"openId"};var ALL_ACCOUNT=LOGIN_ACCOUNT.concat(SHARE_ACCOUNT,TWEIBO);bc.dv=function(bf){this.dC(bf);window.login=this.bBl.bh(this);window.logout=this.bfn.bh(this);window.reg=this.bBi.bh(this);bi.bv(window,"login",this.Jk.bh(this));window.g_cbLogin=this.yK.bh(this);window.g_cbBind=this.bBh.bh(this);window.g_cbDeleteBind=this.bBg.bh(this);this.Yp()};bc.Yp=function(){var eF={account:{},profile:{},bindings:[]};if(typeof GUser!=="undefined"){eF.profile.userId=GUser.userId;eF.profile.nickname=GUser.nickname;eF.profile.avatarUrl=GUser.avatarUrl}if(typeof GBinds!=="undefined"){eF.bindings=GBinds}localCache.qp("user",eF);this.Yn=bq.lb.bG();this.Yn.bv("onlogout",this.bBf.bh(this));this.Yn.bv("onmainaccountreplace",this.yK.bh(this));if(!this.bBe(eF))this.bfn()};bc.bBl=function(bu){bo.mz.cs();bo.yL.cs();bo.yq.cs();if(typeof bu==="undefined")return bo.mz.bQ({title:"登录"});if(bu===0)return bo.yL.bQ({title:"手机号登录"});return bo.yq.bQ({title:"网易邮箱帐号登录"})};bc.bBi=function(){if(this.sp)this.sp.bV();this.sp=bo.Ih.bG()};bc.Jk=function(be){if(typeof GUser==="object"&&be.user&&be.user.profile){var Jp=be.user.profile;GUser.userId=Jp.userId;GUser.nickname=Jp.nickname;GUser.avatarUrl=Jp.avatarUrl;GUser.djStatus=Jp.djStatus}if(this.bdQ("loginsuccess")){this.bN("loginsuccess")}else{location.reload()}};bc.yK=function(bp){if(!bp||bp.code!=200)return;var ks=JSON.stringify(bp);localCache.qp("user",JSON.parse(ks));if(bp.loginType==6){if(this.bfy)this.bfy.bV();this.bfy=bo.beH.bG({user:bp,onsuccess:this.Jk.bh(this)})}else{if(bp.profile){this.Jk({user:bp})}else{if(this.ly)this.ly.bV();this.ly=bo.yQ.bG({user:bp,requiremobile:true,onsuccess:this.Jk.bh(this)})}}};bc.bBh=function(cl){var be=cl.code==200?"snsbind":"snsbinderror",fl=bb.bD("g_iframe");if(cl.code==200){var eF=localCache.bD("user")||{},lI=NEJ.X(cl,{refreshTime:+(new Date)/1e3|0,tokenJsonStr:JSON.stringify({expires_in:cl.expires_in})}),bt=-1;eF.bindings=eF.bindings||[];bm.cz(eF.bindings,function(bBd,vR){if(bBd.type==cl.type)bt=vR});if(bt>=0){eF.bindings[bt]=lI}else{eF.bindings.push(lI)}bC.cE("/api/point/sns",{type:"json",method:"get",query:{snsType:cl.type},onload:function(bl){var hB=cl.point||bl.point;if(hB>0){bo.fJ({title:"绑定成功",type:"success",mesg:'绑定成功 获得<em class="s-fc6">'+hB+"积分</em>"})}else{bo.cj.bQ({tip:"绑定成功"})}}.bh(this)})}else{var bt=bm.dS(ALL_ACCOUNT,function(bw){return bw.type==cl.type});var ir=bt>=0?ALL_ACCOUNT[bt].title:"";if(cl.message){bo.fJ({title:"绑定"+ir,type:"fail",mesg:"绑定失败",mesg2:cl.message})}else{bo.cj.bQ({tip:"绑定失败，请重试",type:2})}}try{var gW=fl.contentWindow;gW.nej.v.bN(gW,be,{result:cl})}catch(e){}bi.bN(window,be,{result:cl})};bc.bBg=function(cl){var be=cl.code==200?"snsunbind":"snsunbinderror",fl=bb.bD("g_iframe");if(cl.code==200){bo.cj.bQ({tip:"已解除绑定"})}else if(cl.message){bo.fJ({title:"解除绑定",type:"fail",mesg:"解绑失败",mesg2:cl.message})}else{bo.cj.bQ({tip:"解绑失败，请重试",type:2})}try{var gW=fl.contentWindow;gW.nej.v.bN(gW,be,{result:cl})}catch(e){}bi.bN(window,be,{result:cl})};bc.bfn=function(){bC.gz("MUSIC_U",{expires:-1});this.Yn.bCL();window.GUser={};this.bN("logoutbefore")};bc.bBf=function(bp){localCache.eW("user");localCache.eW("host-plist");if(typeof GUser==="object"){GUser.userId=0;GUser.nickname="";GUser.avatarUrl=""}if(this.bdQ("logoutsuccess")){this.bN("logoutsuccess")}else{location.reload()}};bc.bBe=function(eF){var Yf=false;if(!eF.bindings||eF.bindings.length==0)return true;bm.cz(eF.bindings,function(bw){if(bw.type==0||bw.type==2||bw.type==5||bw.type==10){Yf=true}else if(bw.type==1){var jd=JSON.parse(bw.tokenJsonStr||"{}");if(jd.hasPassword){Yf=true}}});return Yf};bI.gL.bG({element:window,event:["login","snsbind","snsbinderror","snsunbind","snsunbinderror"]});bJ.Ys.jx()})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),cP=bd("nej.ui"),bI=bd("nej.ut"),bm=bd("nej.u"),bn=bd("nm.x"),bq=bd("nm.d"),bT=bd("nm.w"),bc;bT.Hu=NEJ.C();bc=bT.Hu.bR(cP.fW);bc.df=function(){this.dn();var bk=bb.dT(this.bs);this.bmg=bk[0];this.du=bk[1];this.cN=bk[2]};bc.dr=function(){this.dz="g-select"};bc.cB=function(bf){this.cC(bf);this.de([[this.du,"click",this.CD.bh(this)],[this.cN,"click",this.kK.bh(this)],[document,"click",this.mx.bh(this)]]);this.XC=bf.filter||this.btc;this.oy(bf.list)};bc.cL=function(){this.cR();delete this.ds;delete this.XD;delete this.XC};bc.oy=function(bk,nf){if(!bk){this.bmg.innerText="－请选择－";return}this.ds=bk;bb.fL(this.cN,"g-select-item",{options:bk},{filter:this.XC});this.iB(nf||bk[0])};bc.qn=function(){return this.ds};bc.fA=function(){return this.XD};bc.iB=function(bB){if(this.XD!=bB){this.XD=bB;this.bmg.innerText=this.XC(bB);this.bN("onchange",bB)}};bc.CD=function(be){bi.cr(be);if(bb.cW(this.cN,"f-hide")){if(!this.ds||!this.ds.length)return;bb.bM(this.cN,"f-hide")}else{bb.bO(this.cN,"f-hide")}};bc.mx=function(){bb.bO(this.cN,"f-hide")};bc.kK=function(be){var bj=bi.bZ(be,"d:index"),bt=bb.bz(bj,"index");if(bj){this.iB(this.ds[bt])}};bc.btc=function(gB){return gB.name}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bi=bd("nej.v"),bb=bd("nej.e"),bC=bd("nej.j"),bm=bd("nej.u"),bo=bd("nm.l"),bT=bd("nm.w"),dY=bd("nej.ui"),bq=bd("nm.d"),bn=bd("nm.x"),bc,bP;bo.XE=NEJ.C();bc=bo.XE.bR(bo.fu);bP=bo.XE.dI;bc.dr=function(){this.dz="m-question"};bc.df=function(){this.dn();var bk=bb.bS(this.bs,"j-flag");this.gS=bk[1];this.oV=bk[2];this.rM=bT.Hu.bG({filter:this.bta,parent:bk[0]});bi.bv(this.bs,"click",this.cO.bh(this))};bc.cB=function(bf){bf.parent=bf.parent||document.body;bf.title="回答安全问题";bf.draggable=!0;bf.destroyalbe=!0;bf.mask=true;this.cC(bf);this.rM.oy(bf.data||[])};bc.cL=function(){this.cR();this.gS.value=""};bc.yR=function(){this.cs()};bc.cO=function(be){var bj=bi.bZ(be,"d:action");switch(bb.bz(bj,"action")){case"back":this.bN("onback");this.cs();break;case"next":var bmo=this.gS.value.trim();if(!bmo){this.pk("请输入回答");return}var bl={questionId:this.rM.fA().id,answer:bm.kk(bmo)};this.pk(null);bC.cE("/store/api/security/validateAnswer",{type:"json",method:"post",data:bm.eJ(bl),onload:this.bmq.bh(this),onerror:this.bmq.bh(this)});break}};bc.bta=function(bw){return bw.question};bc.pk=function(dJ){if(dJ){this.oV.innerHTML='<i class="u-icn u-icn-25"></i>'+dJ;bb.bM(this.oV,"f-hide")}else{bb.bO(this.oV,"f-hide")}};bc.bmq=function(be){if(be&&be.code==200){this.bN("onnext");this.cs()}else{var cu={"-3":"回答错误，您还有"+be.times+"次机会！"};if(be.code==-2||be.code==-4){bn.fJ({clazz:"m-layer-w2",title:"更换手机号",message:"<p>帐号已被锁定，请联系客服</p>"+'<p class="f-mgt10">回答错误的次数过多，您的帐号已被锁定，将无法进行任何商城交易，<br/>'+"请联系客服解锁。</p>"+'<p class="f-mgt10">电话：0571-89853546<br/>'+"邮箱：cloudmusicservice@163.com</>",btntxt:"知道了"});this.cs()}else{this.pk(cu[be.code]||"回答出错")}}};bn.bmr=function(bf){var bms=function(be){if(be&&be.code==200){bf.data=be.data;bo.XE.bG(bf).bQ()}else{bn.fJ({clazz:"m-layer-w2",message:"请联系客服电话0571-89853546"})}};bC.cE("/store/api/security/getQuestion",{type:"json",method:"get",onload:bms,onerror:bms})}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),gc=bd("nej.ut"),bn=bd("nm.x"),bq=bd("nm.d"),bo=bd("nm.l"),bc,bP;bo.JC=NEJ.C();bc=bo.JC.bR(gc.ek);bc.cB=function(bf){this.cC(bf);this.ez=bf;this.bmu=bf.mobile;this.bK=bq.lb.bG();this.bK.bv("onsendcaptcha",this.tz.bh(this));this.bK.bv("onsendcaptchaerror",this.Hf.bh(this));this.bK.bv("onchangemobile",this.bsZ.bh(this));this.bK.bv("onchangemobileerror",this.bsY.bh(this));this.XM()};bc.cL=function(){this.cR();this.bK.bV();if(this.eT)this.eT.bV();if(this.JB)this.JB.bV()};bc.XM=function(){if(this.eT)this.eT.cs();if(this.JB)this.JB.bV();this.JB=bn.lR({title:"更换手机号",clazz:"m-layer-find",txt:"txt-mobilestatus",onaction:function(be){if(be.action=="valid"){this.bK.xG({data:{cellphone:this.bmu}})}else{bn.bmr({title:"更换手机号",onback:this.XM.bh(this),onnext:this.bmz.bh(this)})}}.bh(this)})};bc.tz=function(cl){this.eT=bo.oq.bQ({title:"更换手机号",mobile:this.bmu,okbutton:"下一步",onok:this.bmz.bh(this),backbutton:"&lt;&nbsp;&nbsp;上一步",onback:this.XM.bh(this)})};bc.Hf=function(){bo.cj.bQ({tip:"更换失败，请重试",type:2})};bc.bmz=function(){this.eT=bo.oq.bQ({title:"更换手机号",mobileLabel:"新手机号：",okbutton:"完成",onok:this.bsX.bh(this)})};bc.bsX=function(cl){this.bmB=cl.mobile;this.dg=cl.captcha;this.bK.bCx({data:{phone:this.bmB,captcha:this.dg}})};bc.bsZ=function(cl){this.eT.cs();bo.cj.bQ({tip:"更换成功"});if(this.ez.onsuccess)this.ez.onsuccess({mobile:this.bmB})};bc.bsY=function(cl){if(cl.code==506){this.eT.dp(false);this.eT.cV(cl.message,"mobile")}else{this.eT.cs();bo.cj.bQ({tip:"更换失败，请重试",type:2})}}})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),bC=bd("nej.j"),bI=bd("nej.ut"),bm=bd("nej.u"),bn=bd("nm.x"),bo=bd("nm.l"),hV=bd("api"),bT=bd("nm.w");var XO=null,bmD=null;var bsV=function(fg,bmF){if(XO)XO.bV();XO=bo.JC.bG({title:"更换手机号",mobile:fg,onsuccess:function(cl){if(bmF)bmF({cellphone:cl.mobile})}})};var bsU=function(bf){bC.cE("/api/sms/captcha/sent/",{type:"json",query:{cellphone:bf.mobile,channel:"new"},onload:function(be){if(be.code!=200)return bo.cj.bQ({tip:"验证码发送失败",type:2});bmD=bo.oq.bQ({title:bf.title||"验证手机号",mobile:bf.mobile,okbutton:bf.ntext||"下一步",onok:function(cl){bmD.cs();if(bf.onnext)bf.onnext(cl)}})},onerror:function(){bo.cj.bQ({tip:"验证码发送失败",type:2})}})};hV.changePhone=bsV;hV.phoneCode=bsU;hV.validateQuestion=bn.bmr})();
(function(){var bd=NEJ.P,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bX=bd("nej.h"),bF=bd("nej.p");var oS={opacity:1,"z-index":1,background:1,"font-weight":1,filter:1};bX.bpA=function(jl){return oS[jl]===undefined&&jl.indexOf("color")<0};bX.Og=function(bj,rF,nN){nN=nN.slice(0,-1);bb.ch(bj,"transition",nN);bb.kA(bj,rF);return this};bX.GE=function(bj,eo,pt){bb.kA(bj,eo);bb.ch(bj,"transition","none");pt.call(null,eo);return this}})();
(function(){var bd=NEJ.P,cv=NEJ.F,bX=bd("nej.h"),bF=bd("nej.p");if(bF.lD.trident1)return;bX.xI=function(){return!0}})();
(function(){var bd=NEJ.P,bF=bd("nej.ut"),bc;if(!!bF.Px)return;bF.Px=NEJ.C();bc=bF.Px.bR(bF.xM);bc.cB=function(bf){bf=NEJ.X({},bf);bf.timing="easeout";this.cC(bf)}})();
(function(){var bd=NEJ.P,bF=bd("nej.ut"),bc;if(!!bF.Py)return;bF.Py=NEJ.C();bc=bF.Py.bR(bF.xM);bc.cB=function(bf){bf=NEJ.X({},bf);bf.timing="easeinout";this.cC(bf)}})();
(function(){var bd=NEJ.P,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bX=bd("nej.h"),bF=bd("nej.p"),dM=bd("nej.x"),gc=bd("nej.ut");if(bF.lD.trident)return;var baQ={linear:gc.xN,"ease-in":gc.zT,"ease-out":gc.Px,"ease-in-out":gc.Py};bX.Og=function(){var bxC=function(rF,nN){var dR="";bm.fq(rF,function(bB,bW){dR+=nN.replace("all",bW)});return dR};var bxA=function(bB,jl){if(jl==="filter"){bB=bm.CQ(bB,0);bB="alpha(opacity="+bB+")"}if(jl==="z-index")bB=bm.CQ(bB,0);return bB};var bxw=function(bB){return baQ[bB.split(" ")[2]]};var bxv=function(bj,bB,rF,pt,bt){var bB=bB.split(" "),jl=bB[0],ei=parseFloat(bb.eG(bj,jl))||0,lV=parseFloat(rF[jl])||0,bxt=baQ[bB[2]],PE=bB[1].slice(0,-1)*1e3+bB[3].slice(0,1)*1e3;if(PE>=bj.sumTime){bj.sumTime=PE;bj.isLastOne=bt}var FF=nej.p.dU.engine==="trident"&&nej.p.dU.release-5<0;if(jl==="opacity"&&FF){jl="filter";var eE=bb.eG(bj,jl);ei=parseFloat(eE.split("=")[1])||0;lV=lV*100}var bf={from:{offset:ei},to:{offset:lV},duration:PE,onupdate:function(cw){var bB=cw.offset;if(!bX.bpA(jl)){bB=bxA(bB,jl);bb.ch(bj,jl,bB)}else{bb.ch(bj,jl,bB+"px")}},onstop:function(jl){var zD=bj.effects[bt];if(!zD)return;zD=bxt.bV(zD);if(bj.isLastOne===bt)pt.apply(this)}.bh(this,bt)};return bf};return bX.Og.eA(function(be){be.stopped=!0;var bk=be.args;var bj=bk[0],rF=bk[1],nN=bk[2],pt=bk[3];bj.sumTime=0,bj.isLastOne=0;var baZ=[];if(nN.indexOf("all")>-1)nN=bxC(rF,nN);var PH=nN.slice(0,-1);PH=PH.split(",");bj.effects=[];bm.cz(PH,function(bB,bt){var bf=bxv(bj,bB,rF,pt,bt);baZ.push({o:bf,c:bxw(bB)})});bm.cz(baZ,function(bw,bt){var zD=bw.c.bG(bw.o);bj.effects[bt]=zD;zD.gx()});return this})}();bX.GE=bX.GE.eA(function(be){be.stopped=!0;var bk=be.args;var bj=bk[0];bm.cz(bj.effects,function(ce){ce.cr()});bj.effects=[];return this})})();
(function(){var bd=NEJ.P,cv=NEJ.F,bX=bd("nej.h"),bb=bd("nej.e"),bF=bd("nej.p");if(bF.lD.gecko)return;bX.Og=function(bj,rF,nN){nN=nN.slice(0,-1);bb.ch(bj,"transition",nN);setTimeout(function(){bb.kA(bj,rF)},33);return this}})();
(function(){var bd=NEJ.P,cv=NEJ.F,bX=bd("nej.h"),bF=bd("nej.p");if(bF.lD.webkit)return})();
(function(){var bd=NEJ.P,cv=NEJ.F,bX=bd("nej.h"),bF=bd("nej.p");if(bF.lD.presto)return})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bm=bd("nej.u"),bX=bd("nej.h"),bb=bd("nej.e"),bi=bd("nej.v"),bF=bd("nej.ut"),qA;if(!!bF.oE)return;bF.oE=NEJ.C();qA=bF.oE.bR(bF.ek);qA.cB=function(bf){this.cC(bf);this.zp=bb.bD(bf.node);this.bbe=bf.styles||[];this.bbf=bf.onstop||cv;this.PL=bf.transition||[];this.Fq={};this.bbi=this.bxs();if(!!bX.xI&&bX.xI()){setTimeout(this.xI.bh(this),this.PO*1e3)}else{this.de([[this.zp,"transitionend",this.xI.bh(this)]])}};qA.cL=function(){if(!!this.Cp){this.Cp=window.clearInterval(this.Cp)}delete this.zp;delete this.bbe;delete this.bbi;delete this.Fq;delete this.PQ;delete this.PL;delete this.Cp;this.cR()};qA.xI=function(be){if(!!bX.xI&&bX.xI()){this.PR=!1;this.cr();return}if(!!this.PR&&this.bxp(be)){this.PR=!1;this.cr()}};qA.bxp=function(be){var bW=be.propertyName;if(bW===this.PQ||bW.indexOf(this.PQ)>-1)return!0;else return!1};qA.bxs=function(){var bxo=function(ew){var bk=ew.split(":"),jl=bk[0],bB=bk[1],bj=this.zp;if(bB.indexOf("=")>-1){var bbq=parseInt(bb.eG(bj,jl))||0;var dW=parseInt(bB.split("=")[1]);if(bB.indexOf("+")>-1)bB=bbq+dW;else bB=bbq-dW}if(bX.bpA(jl)){if(bB.toString().indexOf("px")<0)bB+="px"}this.Fq[jl]=bB};var bxn=function(bt){if(!this.PL[bt])return"";var pd=this.PL[bt],bI=pd.duration+pd.delay;if(bI>=this.PO){this.PO=bI;this.PQ=pd.property}return pd.property+" "+pd.duration+"s "+pd.timing+" "+pd.delay+"s,"};return function(){var bbs="";this.PO=0;bm.cz(this.bbe,function(ew,bt){bxo.call(this,ew);bbs+=bxn.call(this,bt)}.bh(this));return bbs}}();qA.bxm=function(){this.tL={};bm.fq(this.Fq,function(bB,jl){this.tL[jl]=bb.eG(this.zp,jl)}.bh(this));this.bN("onplaystate",this.tL)};qA.vk=function(){this.PR=!0;bX.Og(this.zp,this.Fq,this.bbi,this.bbf);this.Cp=window.setInterval(this.bxm.bh(this),49);return this};qA.cr=function(){bX.GE(this.zp,this.Fq,this.bbf);this.Cp=window.clearInterval(this.Cp);return this};qA.bOK=function(){};qA.bOL=function(){}})();
(function(){var bd=NEJ.P,cv=NEJ.F,bm=bd("nej.u"),bb=bd("nej.e"),bm=bd("nej.u"),bF=bd("nej.ut");bb.NP=function(bf){bf=bf||{};bf.onstop=bf.onstop||cv;bf.onplaystate=bf.onplaystate||cv;return bf};bb.bby=function(){var bxd=function(bj,NN,FF){var fx,eZ=true;if(!!FF){bm.fq(NN,function(bB,bW){if(bW==="opacity"){bW="filter";var eE=bb.eG(bj,bW);if(eE===""){bb.ch(bj,"filter","alpha(opacity=100)");fx=100}else{fx=parseFloat(eE.split("=")[1])||0}bB=bB*100}else{fx=bb.eG(bj,bW)}if(parseInt(fx)===bB)eZ=false}.bh(this))}else{bm.fq(NN,function(bB,bW){fx=bb.eG(bj,bW);if(parseInt(fx)===bB)eZ=false}.bh(this))}return eZ};return function(bj,NN){var FF=nej.p.dU.engine==="trident"&&nej.p.dU.release-5<0;if(!bxd(bj,NN,FF))return!1;return!0}}();bb.bbB=function(){var bxc=function(bj){var Mr=bb.eG(bj,"display");if(Mr==="none")return!1;return!0};return function(bj,bf,nf){var Aw=bf.opacity||nf;bj=bb.bD(bj);if(!bxc.call(bj))return!1;if(!!bj.effect)return!1;if(!bb.bby(bj,{opacity:Aw}))return!1;bf=bb.NP(bf);bj.effect=bF.oE.bG({node:bj,transition:[{property:"opacity",timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration||1}],styles:["opacity:"+Aw],onstop:function(eo){bj.effect=bF.oE.bV(bj.effect);bf.onstop.call(null,eo)},onplaystate:bf.onplaystate.bh(bj.effect)});bj.effect.vk();return this}}.bh(this)();bb.bbD=function(bj,bf){return bb.bbB(bj,bf,1)};bb.bxa=function(bj,bf){return bb.bbB(bj,bf,0)};bb.bwZ=function(bj){bb.bwY(bj);return this};bb.bwY=function(bj){bj=bb.bD(bj);if(bj.effect&&bj.effect.cr()){if(!!bj.effect)bj.effect=bF.oE.bV(bj.effect)}return this};bb.bOM=function(bj,lS,bf){bj=bb.bD(bj);if(!!bj.effect)return!1;if(!bb.bby(bj,lS))return!1;bf=bb.NP(bf);bf.duration=bf.duration||[];var hf=lS.top||0,jE=lS.left||0;bj.effect=bF.oE.bG({node:bj,transition:[{property:"top",timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration[0]||1},{property:"left",timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration[1]||1}],styles:["top:"+hf,"left:"+jE],onstop:function(eo){bf.onstop.call(null,eo);bj.effect=bF.oE.bV(bj.effect)},onplaystate:bf.onplaystate.bh(bj.effect)});bj.effect.vk();return this};bb.bbI=function(){return function(bj,lS,bf){bj=bb.bD(bj);if(!!bj.effect)return!1;bf=bb.NP(bf);var bk=lS.split(":"),bwV=bk[0],bbK=[];bbK.push(lS);bj.effect=bF.oE.bG({node:bj,transition:[{property:bwV,timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration||1}],styles:bbK,onstop:function(eo){bf.onstop.call(null,eo);bj.effect=bF.oE.bV(bj.effect)},onplaystate:bf.onplaystate.bh(bj.effect)});bj.effect.vk();return this}}();bb.bON=function(){var Qd=function(bj,bu){return bu=="height"?bj.clientHeight:bj.clientWidth};return function(bj,bu,bf){bj=bb.bD(bj);if(!!bj.effect)return!1;bf=bb.NP(bf);var bB=bf.value||false;if(!bB){bb.ch(bj,"display","block");var bj=bb.bD(bj);bB=Qd(bj,bu)}var eZ=bb.eG(bj,"visibility");if(eZ==="hidden"){bj.style.height=0;bb.ch(bj,"visibility","inherit");bj.effect=bF.oE.bG({node:bj,transition:[{property:bu,timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration||1}],styles:[bu+":"+bB],onstop:function(eo){bf.onstop.call(null,eo);bj.effect=bF.oE.bV(bj.effect);NK=window.clearTimeout(NK)},onplaystate:bf.onplaystate.bh(bj.effect)})}else{bj.style.height=bB;bj.effect=bF.oE.bG({node:bj,transition:[{property:bu,timing:bf.timing||"ease-in",delay:bf.delay||0,duration:bf.duration||1}],styles:[bu+":"+0],onstop:function(eo){bb.ch(bj,"visibility","hidden");bb.ch(bj,bu,"auto");bf.onstop.call(null,eo);bj.effect=bF.oE.bV(bj.effect);NK=window.clearTimeout(NK)},onplaystate:bf.onplaystate.bh(bj.effect)})}var NK=window.setTimeout(function(){bj.effect.vk()}.bh(this),0);return this}}()})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),bI=bd("nej.ut"),bm=bd("nej.u"),dY=bd("nej.ui"),bn=bd("nm.x"),bq=bd("nm.d"),bT=bd("nm.w"),hV=bd("api"),bc,bP;bT.xb=NEJ.C();bc=bT.xb.bR(dY.fW);bP=bT.xb.dI;bc.dr=function(){this.dz="m-image-preview"};bc.df=function(){this.dn();var bk=bb.bS(this.bs,"j-flag");this.GX=bk[0];this.Cm=bk[1];this.gi=bk[2];this.XS=bk[3];this.Ea=bk[4];this.DX=bk[5]};bc.cB=function(bf){this.cC(bf);this.bsS();this.pz=bf.urls;this.gY=this.pz.length;if(this.gY==1){bb.ch(this.Ea,"display","none");bb.ch(this.DX,"display","none")}this.de([[this.bs,"click",this.cO.bh(this)],[document,"keydown",this.bsR.bh(this)]]);bn.bcD(this.pz,function(ts,fZ){this.pK=fZ;this.nj(bf.index||0)}.bh(this))};bc.cL=function(){this.cR();bb.bO(this.Cm,"fail-loading");bb.bM(this.Cm,"f-hide");bb.ch(this.Ea,"display","");bb.ch(this.DX,"display","");bb.bM(this.Ea,"z-cntdis");bb.bM(this.iD,"z-cntdis");bb.bM(this.DX,"z-cntdis");bb.bM(this.CJ,"z-cntdis");this.gi.src="";delete this.pz;delete this.gY};bc.cO=function(be){var bj=bi.bZ(be,"action");if(bb.cW(bj,"z-dis"))return;switch(bb.bz(bj,"action")){case"close":this.bV();break;case"prev":this.nj(this.dx-1);break;case"next":this.nj(this.dx+1);break;case"go":this.nj(bb.bz(bj,"index"));break}};bc.nj=function(bt){if(bt<=0){bb.bO(this.Ea,"z-cntdis")}else{bb.bM(this.Ea,"z-cntdis")}if(bt>=this.gY-1){bb.bO(this.DX,"z-cntdis")}else{bb.bM(this.DX,"z-cntdis")}if(bt<0||bt>=this.pz.length)return;var jb=this.pz[bt];this.XS.href=jb;if(this.pK[bt]){bb.bO(this.Cm,"f-hide");this.gi.src=jb}else{this.gi.src="";bb.bM(this.Cm,"f-hide");bb.bM(this.Cm,"fail-loading")}this.dx=bt};hV.imageView=function(ts,bt){bT.xb.bG({parent:document.body,urls:ts,index:bt})};bc.bsR=function(be){bi.cr(be);switch(be.keyCode){case 37:this.nj(this.dx-1);break;case 39:this.nj(this.dx+1);break;case 27:this.bV();break;case 38:this.GX.scrollTop-=20;break;case 40:this.GX.scrollTop+=20;break}};bc.bsS=function(){var Ya=bb.gG("input");this.bs.appendChild(Ya);Ya.focus();bb.eW(Ya)}})();
(function(){var bd=NEJ.P,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),dW=bd("nej.p"),bC=bd("nej.j"),fO=bd("nm.ut"),bT=bd("nm.w"),bo=bd("nm.l"),bn=bd("nm.x"),bc,bP;bo.Yb=NEJ.C();bc=bo.Yb.bR(bo.fu);bP=bo.Yb.dI;bc.dv=function(bf){bf.title="转发动态";this.dC(bf)};bc.cB=function(bf){if(bf.onclose===undefined)bf.onclose=function(){this.cs()}.bh(this);this.cC(bf);this.lP=bf.rid;this.lm=bf.uid;this.bsQ=bf.text;this.fI.value=this.bsQ;this.hs=bT.En.bG({parent:document.body,target:this.fI})};bc.dr=function(){this.dz="m-wgt-forward"};bc.df=function(){this.dn();var cJ=bb.bS(this.bs,"j-flag");this.Cs=cJ[0];this.fI=cJ[1];this.VH=cJ[2];this.bsP=cJ[3];this.Eo=cJ[4];this.ip=cJ[5];this.bmW=cJ[6];this.bsO=cJ[7];this.sQ=cJ[8];bi.bv(this.fI,"input",this.jL.bh(this));bi.bv(this.fI,"keyup",this.UL.bh(this));bi.bv(this.fI,"click",this.kt.bh(this));bi.bv(this.Eo,"click",this.Vz.bh(this));bi.bv(this.bsP,"click",this.Vy.bh(this));bi.bv(this.bmW,"click",this.zq.bh(this));bi.bv(this.bsO,"click",this.Ge.bh(this))};bc.cL=function(){this.cR();if(this.gH){this.gH.bV();delete this.gH}if(this.hs){this.hs.bV();delete this.hs}};bc.jL=function(be){dW.dU.browser=="ie"&&dW.dU.version<"7.0"?setTimeout(this.hj.bh(this),0):this.hj()};bc.UL=function(be){this.kt();this.jL()};bc.hj=function(){var cA=this.fI.value.trim().length;this.ip.innerHTML=!cA?"140":140-cA;cA>140?bb.bO(this.ip,"s-fc6"):bb.bM(this.ip,"s-fc6");if(!cA||cA==0)bb.ch(this.Cs,"display","block");else bb.ch(this.Cs,"display","none")};bc.Vz=function(be){bi.cr(be);!!this.gH&&this.gH.cs();this.hs.Ek();this.hj()};bc.Vy=function(be){bi.cr(be);if(!this.gH){this.gH=bo.BN.bG({parent:this.VH});this.gH.bv("onselect",this.uh.bh(this))}this.gH.bQ()};bc.uh=function(be){var cm="["+be.text+"]";fO.Co(this.fI,this.mq,cm);this.hj();bi.bN(this.fI,"keyup")};bc.kt=function(){this.mq=fO.ra(this.fI)};bc.zq=function(be){bi.cr(be);if(this.ey())return;if(this.fI.value.trim().length>140){this.ef("字数超过140个字符");return}var bsN=this.fI.value.trim();var iQ=window.GUser.userId;var bA=this.lP;var cg="/api/event/forward";var bl={forwards:bsN,id:this.lP,eventUserId:this.lm};bl=bm.eJ(bl);this.ey(!0);var fK=bC.cE(cg,{sync:false,type:"json",data:bl,method:"POST",onload:this.Uc.bh(this),onerror:this.gM.bh(this)})};bc.Uc=function(bp){this.ey(!1);if(bp.code!=200){var cU="转发失败";switch(bp.code){case 404:cU=bp.message||"该动态已被删除";break;case 407:cU="输入内容包含有关键字";break;case 408:cU="转发太快了，过会再分享吧";break}this.ef(cU);return}fO.bjp(this.fI.value);this.cs();bo.cj.bQ({tip:"转发成功！",autoclose:true});this.bN("onforward",{id:this.lP,eventUserId:this.lm})};bc.gM=function(bl){this.ey(!1);this.ef(cU)};bc.ey=function(dB){return bP.ey(this.bmW,dB,"转发","转发中 ...")};bc.ef=function(cU){return bP.ef(this.sQ,cU)};bc.Ge=function(be){bi.dc(be);this.cs()};bc.li=function(){this.fI.focus();if(dW.dU.browser=="ie"&&parseInt(dW.dU.version)<10)return;fO.KV(this.fI,{start:0,end:0});this.kt()};bc.cs=function(){bP.cs.call(this);if(this.gH){this.gH.bV();delete this.gH}if(this.hs){this.hs.bV();delete this.hs}};bc.bQ=function(bf){bP.bQ.call(this);this.ef();this.ey(!1);this.hj();this.li();this.mq=fO.ra(this.fI)};bn.bsM=function(bf){if(!GUser||!GUser.userId||GUser.userId<=0){bo.mz.bQ({title:"登录"});return}if(bf.title===undefined)bf.title="转发动态";bo.Yb.bQ(bf)}})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bI=bd("nej.ut"),bC=bd("nej.j"),bn=bd("nm.x"),bq=bd("nm.d"),fO=bd("nm.ut"),bo=bd("nm.l"),bc,bP;bo.JZ=NEJ.C();bc=bo.JZ.bR(bo.fu);bP=bo.JZ.dI;bc.dv=function(){this.dC()};bc.df=function(){this.dn();var bk=bb.bS(this.bs,"j-flag");this.hA=bk[0];this.Wv=bk[1];this.dw=bk[2];this.bno=bk[3];this.gb=bk[4];bi.bv(this.bs,"click",this.eI.bh(this));bi.bv(this.hA,"input",this.jL.bh(this));bi.bv(this.hA,"keyup",this.xi.bh(this))};bc.dr=function(){this.dz="m-sharesingle-layer"};bc.cB=function(bf){bf.parent=bf.parent||document.body;bf.title=bf.title||"分享";bf.draggable=!0;bf.mask=!0;bf.clazz="m-layer m-layer-w2";this.cC(bf);this.hA.value=bf.mesg||"";this.cf={id:bf.rid,type:bf.type,picUrl:bf.purl,snsType:bf.snsType,resourceUrl:bf.rurl};if(!this.cf.resourceUrl)delete this.cf.resourceUrl;this.xg();this.ef(null);this.ey(false)};bc.eI=function(be){var bj=bi.bZ(be,"d:action"),co=bb.bz(bj,"action");bi.dc(be);switch(co){case"txt":this.kt();break;case"emt":bi.qa(be);!!this.hs&&this.hs.BM();if(!this.gH){this.gH=bo.BN.bG({parent:this.Wv});this.gH.bv("onselect",this.uh.bh(this))}this.gH.bQ();break;case"ok":this.ef(null);if(this.or)return;if(this.hA.value.trim().length>140){this.ef("字数超过140个字符");return}this.ey(true);this.cf.msg=this.hA.value;if(!this.cf.resourceUrl){delete this.cf.resourceUrl}bC.cE("/sns/share/resource",{type:"json",method:"post",data:bm.eJ(this.cf),onload:this.ry.bh(this),onerror:this.ry.bh(this)});break;case"cc":this.cs();break}};bc.uh=function(be){var cm="["+be.text+"]";fO.Co(this.hA,this.mq,cm);this.xg()};bc.jL=function(){this.xg();this.kt()};bc.xi=function(){this.xg();this.kt()};bc.xg=function(){var cA=this.hA.value.trim().length;this.dw.innerText=140-cA;cA>140?bb.gf(this.dw,"s-fc4","s-fc6"):bb.gf(this.dw,"s-fc6","s-fc4")};bc.kt=function(){this.mq=fO.ra(this.hA)};bc.ry=function(be){var hU={407:"输入内容包含有关键字",404:"分享的资源不存在",408:"分享太快了，过会再分享吧"};if(be.code==200){this.bN("onsuccess",be);if(!be.stopped){bo.cj.bQ({tip:"分享成功！",autoclose:true})}this.cs()}else{this.ef(hU[be.code]||"分享失败")}this.ey(false)};bc.ef=function(bnr){if(bnr){this.gb.innerHTML='<i class="u-icn u-icn-25"></i>'+bnr;bb.bM(this.gb,"f-hide")}else{bb.bO(this.gb,"f-hide")}};bc.ey=function(bnt){this.or=bnt;if(bnt){this.bno.innerHTML="<i>分享中...</i>"}else{this.bno.innerHTML="<i>分享</i>"}};bc.bQ=function(){bP.bQ.call(this);var nX=this.hA.value.length;fO.KV(this.hA,{start:nX,end:nX,text:""});this.kt()}})();
(function(){var bd=NEJ.P,ce=NEJ.O,cv=NEJ.F,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bI=bd("nej.ut"),bC=bd("nej.j"),bn=bd("nm.x"),bq=bd("nm.d"),hV=bd("api"),bo=bd("nm.l"),bc,bP;bo.bnd=NEJ.C();bc=bo.bnd.bR(bo.fu);bc.df=function(){this.dn();var bk=bb.bS(this.bs,"j-flag");bi.bv(this.bs,"click",this.cO.bh(this))};bc.dr=function(){this.dz="m-simple-share-layer"};bc.cB=function(bf){bf.clazz="m-layer-w6";if(!bf.shareType)bf.parent=bf.parent||document.body;bf.title=bf.title||"分享";bf.draggable=!0;bf.mask=bf.mask||true;this.cC(bf);this.cf={id:bf.id||0,type:bf.type||"activity",picUrl:bf.picUrl,msg:bf.text,resourceUrl:bf.resourceUrl,summary:bf.summary};this.de([[window,"snsbind",this.ER.bh(this)],[window,"snsbinderror",this.cs.bh(this)]]);this.rw={rid:this.cf.id,rurl:this.cf.resourceUrl,purl:this.cf.picUrl,mesg:this.cf.msg,type:this.cf.type,onsuccess:bf.onsuccess};if(bf.shareType){this.bne(bf.shareType)}};bc.cO=function(be){var bj=bi.bZ(be,"d:type"),bu=bb.bz(bj,"type");this.bne(bu)};bc.bne=function(bu){switch(bu){case"xlwb":case"rr":case"db":var ot={xlwb:2,rr:4,db:3},Gc=ot[bu],pY=localCache.Mz("user.bindings")||[],bt=bm.dS(pY,function(bw){return bw.type==Gc&&!bw.expired});if(bt>=0){this.tA(Gc)}else{var jo={snsType:Gc,callbackType:"Binding",clientType:"web2",forcelogin:true,csrf_token:bC.gz("__csrf")};top.window.open("/api/sns/authorize?"+bm.eJ(jo))}break;case"wx":case"yx":var jo={resourceUrl:this.cf.resourceUrl,type:bu};top.open("/share/QRCode?"+bm.eJ(jo));this.cs();break;case"qzone":var jy={url:this.cf.resourceUrl,title:this.cf.msg||"",pics:this.cf.picUrl,summary:this.cf.summary};top.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+bm.eJ(jy));this.cs();break;case"lofter":var jy={from:"cloudmusic",image:this.cf.picUrl,source:"网易云音乐",sourceurl:this.cf.resourceUrl,content:this.cf.msg};top.open("http://www.lofter.com/sharephoto/?"+bm.eJ(jy));this.cs();break}};bc.ER=function(be){this.tA(be.result.type)};bc.tA=function(bu){this.cs();if(this.sK){this.sK.bV();delete this.sK}this.rw.snsType=bu;this.sK=bo.JZ.bG(this.rw);this.sK.bQ()};var dE=null;hV.simpleShare=function(bf){if(dE)dE.bV();dE=bo.bnd.bG(bf).bQ()}})();
(function(){var bd=NEJ.P,ce=NEJ.O,bb=bd("nej.e"),bi=bd("nej.v"),bm=bd("nej.u"),bC=bd("nej.j"),bI=bd("nej.ut"),bq=bd("nm.d"),bn=bd("nm.x"),bJ=bd("nm.m"),bo=bd("nm.l"),bH=bd("nm.m.f"),hV=bd("api"),uN=/#(.*?)$/,bc,bP,bQm={pubEventWithPics:false,pubEventWithoutResource:false,pubEventWithPictureForbiddenNotice:"等级达到Lv.4，即可添加图片"};bH.bng=NEJ.C();bc=bH.bng.bR(bI.eL);bc.cS=function(){this.cX();window.onHashChange=this.Jo.bh(this);window.log=this.tw.bh(this);window.share=this.tA.bh(this);window.subscribe=this.LK.bh(this);window.onIframeClick=this.bsL.bh(this);bi.bv(window,"playchange",this.ht.bh(this));bi.bv(window,"playstatechange",this.bsJ.bh(this));this.oH=bJ.Ys.jx();this.oH.bv("loginsuccess",this.bsI.bh(this));this.oH.bv("logoutbefore",this.bsH.bh(this));this.oH.bv("logoutsuccess",this.bsF.bh(this));this.Yp();this.cH=bH.EI.bG();this.cH.bN("onshow",{});bC.cE("/api/login/token/refresh",{type:"json",method:"post"});this.Jo(bn.Av());this.Jl=bJ.bly.bG();hV.refreshUserInfo=this.Jl.Nv.bh(this.Jl);this.bsD()};bc.Yp=function(){this.jv=bq.lW.bG()};bc.Jo=function(eQ){var be=location.parse(eQ);this.nG(be)};bc.nG=function(be,bu){var fl=bb.bD("g_iframe"),kg=be.path,cG=be.query,it=fl.contentWindow.location;this.uU=fl;if(/^\/mv/.test(kg)){if(this.cH)this.cH.cs();this.qz=document.title}else{if(this.cH)this.cH.bQ();document.title=this.qz||bn.AH()}if(cG.play=="true"&&/^\/(m\/)?song/.test(kg)){if(this.cH)this.cH.Hv(18,cG.id,true)}if(/^\/my\/m\/music\/playlist/.test(kg)){var uS=bn.NA();if(!uS&&!!cG.id){location.dispatch2("/playlist?id="+cG.id);return}}if(bu!==undefined)return GDispatcher.refreshIFrame(be.href)};bc.bsI=function(){var eQ=uN.test(location.href)?RegExp.$1:"",be=location.parse(eQ);this.Jl.Nv();if(!hV.sharePermission){hV.sharePermission=bQm}bC.cE("/api/event/user/permission",{type:"json",onload:function(be){if(be.code==200){hV.sharePermission=NEJ.EX(bQm,be)}}});this.nG(be,"urlchange")};bc.bsH=function(){bo.KC.cs();this.Jl.Nv()};bc.bsF=function(){if(!location.hash||location.hash=="#"){var eQ=uN.test(location.href)?RegExp.$1:"",be=location.parse(eQ);this.nG(be,"urlchange");return}location.hash="#"};bc.ht=function(be){if(this.uU){var gW=this.uU.contentWindow;if(gW.nej&&gW.nej.v)gW.nej.v.bN(gW,"playchange",be)}};bc.bsJ=function(be){if(!this.uU)return;var gW=this.uU.contentWindow;try{if(gW.nej&&gW.nej.v)gW.nej.v.bN(gW,"playstatechange",be)}catch(e){}};bc.tw=function(co,ci){switch(co){case"play":this.jv.gx(ci);break;case"search":this.jv.biX(ci);break;default:this.jv.sL(co,ci)}};bc.tA=function(){if(this.uU.contentWindow.share){this.uU.contentWindow.share.apply(this.uU.contentWindow,arguments)}};bc.LK=function(cD,bsC){var gW=this.uU.contentWindow;if(gW.nm&&gW.nm.x){if(!gW.nm.x.kw){gW=top.window}if(bsC&&gW.nm.x.bkM){gW.nm.x.bkM({data:cD.program})}else if(gW.nm.x.kw){var bk=bm.gJ(cD)?cD:[cD];gW.nm.x.kw({tracks:bk})}}};bc.bsL=function(be){bi.bN(window,"iframeclick")};bc.bsD=function(){bC.cE("/api/copyright/pay_fee_message/config",{type:"json",onload:function(be){if(be.code==200){hV.feeMessage=be.config}}});hV.sharePermission=bQm;bC.cE("/api/event/user/permission",{type:"json",onload:function(be){if(be.code==200){hV.sharePermission=NEJ.EX(bQm,be)}}})};bI.gL.bG({element:window,event:["playchange","iframeclick","playstatechange"]});bb.dL("template-box");new bH.bng})()